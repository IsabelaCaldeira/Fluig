<html>
	<head>
		<!-- =================================================================================================== -->
		<!-- BIBLIOTECAS PADR�ES DO FLUIG -->
		<!-- =================================================================================================== -->
		<link type="text/css" rel="stylesheet" href="/portal/resources/style-guide/css/fluig-style-guide.min.css"/>
		<script type="text/javascript" src="/portal/resources/js/jquery/jquery.js"></script>
		<script type="text/javascript" src="/portal/resources/js/jquery/jquery-ui.min.js"></script>
		<script type="text/javascript" src="/portal/resources/js/mustache/mustache-min.js"></script>
		<script type="text/javascript" src="/portal/resources/style-guide/js/fluig-style-guide.min.js" charset="utf-8"></script>
		
		<script src="/style-guide/js/fluig-style-guide-filter.min.js"></script>
		<link href="/style-guide/css/fluig-style-guide-filter.min.css" rel="stylesheet" type="text/css">
	
		<!-- =================================================================================================== -->
		<!-- CSS DO FORMUL�RIO -->
		<!-- =================================================================================================== -->
		<link rel="stylesheet" href="style/style.css">
		
		<!-- =================================================================================================== -->
		<!-- USAR CONSTRAINTS -->
		<!-- =================================================================================================== -->
		<script type="text/javascript" src="/webdesk/vcXMLRPC.js"></script>
		
		<!-- =================================================================================================== -->
		<!-- BOOTSTRAP -->
		<!-- =================================================================================================== -->
		<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"/>-->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
		
		<!-- =================================================================================================== -->
		<!-- SWEET ALERT 2 -->
		<!-- =================================================================================================== -->
		<script src="https://cdn.jsdelivr.net/npm/promise-polyfill"></script>
		<script src="https://cdn.jsdelivr.net/npm/sweetalert2@9"></script>
		<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
	</head>
	<body>
		<div class="fluig-style-guide">
			<form name="form" role="form">
				<input id="ATIVIDADE" name="ATIVIDADE" type="hidden">
				<input id="NUMPROCESSO" name="NUMPROCESSO" type="hidden">
				<input id="SOLICITANTE" name="SOLICITANTE" type="hidden">
				<input id="DECISAO" name="DECISAO" type="hidden">
				<input id="ATVAPROV" name="ATVAPROV" type="hidden">
				<input id="IDREQ" name="IDREQ" type="hidden">
				<input id="IDMOVGERADO" name="IDMOVGERADO" type="hidden">

				<input id="DADOSFILIAL" name="DADOSFILIAL" type="hidden">
				<input id="ENDERECOFILIAL" name="ENDERECOFILIAL" type="hidden">
				<input id="FILIAL" name="FILIAL" type="hidden">
				<input id="CODLOC" name="CODLOC" type="hidden">
				<input id="CODCFO" name="CODCFO" type="hidden">
				<input id="EMISSAO" name="EMISSAO" type="hidden">
				<input id="FIMCONTRATO" name="FIMCONTRATO" type="hidden">
				<input id="VALOR" name="VALOR" type="hidden">
				<input id="DOCUMENTIDGERADO" name="DOCUMENTIDGERADO" type="hidden">
				<input id="CODCPG" name="CODCPG" type="hidden">
				
				<input id="SEQATUAL" name="SEQATUAL" type="hidden">
				<input id="PESQUISAATUAL" name="PESQUISAATUAL" type="hidden">
				<input id="SEQMAX" name="SEQMAX" type="hidden">
				<input id="EMAILVALIDADOR" name="EMAILVALIDADOR" type="hidden">
				<input id="OSOBRIGATORIA" name="OSOBRIGATORIA" type="hidden">
				<input id="MOEDA" name="MOEDA" type="hidden">

				<div class="form-group col-md-12">
					<div class="row">
						<div class="form-group col-md-1"></div>
						<div class="form-group col-md-10">
							
							<div class="panel panel-default" id="PAINELDADOSGERAIS">
								<div class="panel-heading text-center" style="background-color: #f5f5f5;" id="divTITULO">
									<label class="margemTop secao">B O L E T I M &nbsp;&nbsp; D E &nbsp;&nbsp; M E D I Ç Ã O</label>
								</div>
								
								<div class="panel-body">
									<div class="margemTop">
									
										<div id="divCONEXAO">
											<div class="row">
												<div class="form-group col-md-12" style="text-align: center;">
													<label class="secao">AUTENTIQUE SEU ACESSO</label>
												</div>
											</div>
											
											<div class="row">
												<div class="form-group col-md-3"></div>
											
												<div class="form-group col-md-3">
													<label class="info">Login</label>
													<input id="LOGIN" name="LOGIN" class="form-control" type="text" mask="00.000.000/0000-00">
												</div>
												
												<div class="form-group col-md-3">
													<label class="info">Senha</label>
													<div class="input-group">
														<input id="SENHA" name="SENHA" class="form-control" type="password">
														<span class="input-group-addon" onmouseover="exibirSenha(this);" onmouseout="ocultarSenha(this);">
															<i class="flaticon flaticon-view-slash icon-sm"></i>
														</span>
													</div>
												</div>
												
												<div class="form-group col-md-3"></div>
											</div>
											
											<div class="row">
												<div class="form-group col-md-5"></div>
												
												<div class="form-group col-md-2" style="text-align: center;">
													<input type="button" style="width: 100% !important;" class="btn btn-warning" id="btnConectar" value="Acessar"></input>
												</div>
											</div>
										</div>
								
										<div id="divCONTEUDO">		
											<div class="row">
												<div class="form-group col-md-12" style="text-align: center;">
													<label class="secao">INFORMAÇÕES GERAIS</label>
												</div>
											</div>
												
											<div class="row">
												<div class="form-group col-md-8">
													<label class="info">Contrato</label>
													<select class="form-control" id="CONTRATO" name="CONTRATO" onchange="dadosContrato(); buscaValidador();"></select>
													<input id="CONTRATOTXT" name="CONTRATOTXT" class="form-control" type="text" readonly>
													<input id="CODCONTRATO" name="CODCONTRATO" type="hidden">
													<input id="IDFSIMNAO" name="IDFSIMNAO" type="hidden">
												</div>
												
												<div class="form-group col-md-4">
													<label class="info">Fornecedor</label>
													<input id="NOMECFO" name="NOMECFO" class="form-control" type="text" readonly>
												</div>
												
											</div>
											
											<div class="row">
												<div class="form-group col-md-3">
													<label class="info">Inicio Prestação do Serviço</label>
													<div class="input-group" id="divDTINICIOSERVICO">
														<input id="DTINICIOSERVICO" name="DTINICIOSERVICO" class="form-control" type="text">
														<span class="input-group-addon" style="cursor: pointer;">
															<i class="fluigicon fluigicon-calendar icon-sm"></i>
														</span>
													</div>
												</div>
												
												<div class="form-group col-md-3">
													<label class="info">Final Prestação do Serviço</label>
													<div class="input-group" id="divDTFINALSERVICO">
														<input id="DTFINALSERVICO" name="DTFINALSERVICO" class="form-control" type="text">
														<span class="input-group-addon" style="cursor: pointer;">
															<i class="fluigicon fluigicon-calendar icon-sm"></i>
														</span>
													</div>
												</div>
												
												<div class="form-group col-md-3">
													<label class="info">Data da Medição</label>
													<div class="input-group" id="divDTMEDICAO">
														<input id="DTMEDICAO" name="DTMEDICAO" class="form-control" type="text">
														<span class="input-group-addon" style="cursor: pointer;">
															<i class="fluigicon fluigicon-calendar icon-sm"></i>
														</span>
													</div>
												</div>
												
												<div class="form-group col-md-3">
													<label class="info">Nome Solicitante(Fornecedor)</label>
													<input id="NOMESOLICITANTE" name="NOMESOLICITANTE" class="form-control" type="text">
												</div>
											</div>
											
											<div class="row">
												<div class="form-group col-md-6">
													<label class="info">Observações Fornecedor</label>
													<textarea id="OBSERVACOES" name="OBSERVACOES" class="form-control" style="resize: none;" rows="2"></textarea>
												</div>
												
												<div class="form-group col-md-6">
													<label class="info">E-mail Solicitante (Fornecedor)</label>
													<input id="EMAILSOLICITANTE" name="EMAILSOLICITANTE" class="form-control" type="text">
												</div>	
											</div>
											
											<div class="row" id="divBMSCCUSTO">

												<div id="divDESCONTO">
													<div class="form-group col-md-2">
														<label class="info">Desconto Incondicional</label>
														<div class="input-group">
															<span class="input-group-addon"><strong>R$</strong></span>
															<input type="text" class="form-control" id="DESCONTO" name="DESCONTO" onchange="replacePontoDesconto(); calcTotalBMS();" onkeypress="return onlynumber();">
														</div>
													</div>
												</div>

												<div class="form-group col-md-2">
													<label class="info">BMS Atual</label>
													<div class="input-group">
														<span class="input-group-addon"><strong>R$</strong></span>
														<input type="text" class="form-control" id="BMSATUAL" name="BMSATUAL" readonly>
													</div>
												</div>
												
												<div id="divBMSFUTURO">
													<div class="form-group col-md-2">
														<label class="info">BMS Previsto</label>
														<div class="input-group">
															<span class="input-group-addon"><strong>R$</strong></span>
															<input type="text" class="form-control" id="BMSPREVISTO" name="BMSPREVISTO" readonly>
														</div>
													</div>
													
													<div class="form-group col-md-2">
														<label class="info">Variação Atual x Previsto</label>
														<div class="input-group">
															<input type="text" class="form-control" id="VARIACAOBMS" name="VARIACAOBMS" readonly style="text-align: right;">
															<span class="input-group-addon"><strong>%</strong></span>
														</div>
													</div>
													
													<div class="form-group col-md-2">
														<label class="info">BMS Anterior</label>
														<div class="input-group">
															<span class="input-group-addon"><strong>R$</strong></span>
															<input type="text" class="form-control" id="BMSANTERIOR" name="BMSANTERIOR" readonly>
														</div>
													</div>
													
													<div class="form-group col-md-2">
														<label class="info">Variação Atual x Anterior</label>
														<div class="input-group">
															<span class="input-group-addon"><strong>%</strong></span>
															<input type="text" class="form-control" id="VARIACAOBMS2" name="VARIACAOBMS2" readonly style="text-align: right;">
														</div>
													</div>
												</div>
												<div id="divMOEDA">
													<div class="form-group col-md-2">
														<label class="info">Cotação Moeda</label>
														<div class="input-group">
															<span class="input-group-addon"><strong>R$</strong></span>
															<input type="text" class="form-control" id="COTACAODOLAR" name="COTACAODOLAR" readonly>
														</div>
													</div>
												</div>
											</div>
											<div class="row" id="divCCUSTO">
												
												<div class="form-group col-md-3">
													<label class="info">Centro de Custo</label>
													<input
												      	type="zoom"
												      	id = "CCUSTO"
												      	name="CCUSTO"
												      	data-zoom="{
												        	'displayKey':'DESCCOMPLETA',
													        	'datasetId':'dsCRMSUP001CCusto',
													        	'placeholder':'Selecione o Centro de Custo',
													        	'fields':[
													             	{
													                	'field':'DESCCOMPLETA',
													             		'label':'Contrato',
													             		'standard':'true'
													           		}
													            ]
													      	}"
													/>
													<input id="CODCCUSTO" name="CODCCUSTO" type="hidden">
												</div>
												
												<div class="form-group col-md-5">
	                                                <label class="info" title="Utilize “00.0.00.000 – OPEX caso não se trate de um CAPEX">EJIF</label>
	                                                	<input id="EJIFTXT" name="EJIFTXT" type="hidden">
	                                                        <input
	                                                        type="zoom"
	                                                        id = "EJIF"
	                                                        name="EJIF"
	                                                        data-zoom="{
	                                                            'displayKey':'DESCCOMPLETA',
	                                                            'datasetId':'dsCRMEST001Ejif',
	                                                            'maximumSelectionLength':'1',
	                                                            'placeholder':'Selecione EJIF',
	                                                            'fields':[
	                                                                {
	                                                                    'field':'DESCCOMPLETA',
	                                                                    'label':'EJIF',
	                                                                    'standard':'true',
	                                                                    'search':'true'
	                                                                }
	                                                            ]
	                                                        }"
	                                                    />
	                                            </div>
	                                            
	                                            <div class="form-group col-md-2">
													<label class="info">Saldo</label>
													<div class="input-group">
														<span class="input-group-addon"><strong>R$</strong></span>
														<input type="text" class="form-control" id="SALDO" name="SALDO" readonly>
													</div>
												</div>
													
	                                           
												
											</div>
											
											<div class="row" id="divOBSVALIDADOR">
												<div class="form-group col-md-12">
													<label class="info">Observações Validador</label>
													<textarea class="form-control" id="OBSVALIDADOR" name="OBSVALIDADOR" rows="4" style="resize: none;"></textarea>
												</div>
											</div>

											<div class="row" id="divIMPORTARRATEIO">
												<hr class="hr"/>
	                                        	<div class="form-group col-md-2 "></div>
												
												<div class="form-line col-md-5 " style="margin-bottom: 0px;">
													<label class="info">Importar Rateio</label><label class="info" style="font-size: 12px;">&nbsp;&nbsp;(Após incluir os itens)</label>
													<input id="AUTOMATIZARPREENCHIMENTO" name="AUTOMATIZARPREENCHIMENTO" type="file" onchange="pegaCSV(this);" class="form-control"/>
												</div>
												<div class="form-group col-md-3" style="margin-top: 22px;">
													<a class="btn btn-warning" style="width: 100%;" onclick="ExportToCsv('Planilha Rateio', 'ITENSCOTACAO')"><strong>Baixar Planilha</strong></a>
												</div>
	                                        </div>
											
											<div class="row">
												<div class="form-group col-md-12">
													<hr class="hr"/>
												</div>
											</div>
											<div id="divITENSCONTRATO">
												<div class="row">
													<div class="form-group col-md-12" style="text-align: center;">
														<label class="secao">ITENS CONTRATO</label>
													</div>
												</div>
												
												<div class="row">
													<div class="form-group col-md-12">
														<table id="ITENSCONTRATO" tablename="ITENSCONTRATO" class="table table-hover" border="0" nodeletebutton="true" noaddbutton="true">
															<thead id="CABECITENSCONTRATO">
																<tr>
																	<th class="form-group col-md-1 exclusao" style="background-color: white; text-align: center;"><label class="info2" style="margin-top: 10px;"><strong>Excluir</strong></label></th>
																	<th class="form-group col-md-1" style="background-color: white; text-align: center;"><label class="info2" style="margin-top: 10px;"><strong>SEQ</strong></label></th>
																	<th class="form-group col-md-2 custo" style="background-color: white; text-align: center;"><label class="info2" style="margin-top: 10px;"><strong>Código</strong></label></th>
																	<th class="form-group col-md-3" style="background-color: white; text-align: center;"><label class="info2" style="margin-top: 10px;"><strong>Item</strong></label></th>
																	<th class="form-group col-md-1 pesquisa" style="background-color: white; text-align: center; width: 80px;"><label class="info2" style="margin-top: 10px;"><strong></strong></label></th>
																	<th class="form-group col-md-1" style="background-color: white; text-align: center;"><label class="info2" style="margin-top: 10px;"><strong>UN</strong></label></th>
																	<th class="form-group col-md-2 colunaPTAX" style="background-color: white; text-align: center;"><label class="info2" style="margin-top: 10px;"><strong id="PTAX">Preço </strong></label></th>
																	<th class="form-group col-md-2 colunaPrecoUn" style="background-color: white; text-align: center;"><label class="info2" style="margin-top: 10px;"><strong>Preço Un.</strong></label></th>
																	<th class="form-group col-md-1" style="background-color: white; text-align: center;"><label class="info2" style="margin-top: 10px;"><strong>Qtd.</strong></label></th>
																	<th class="form-group col-md-2" style="background-color: white; text-align: center;"><label class="info2" style="margin-top: 10px;"><strong>Preço Tot.</strong></label></th>
																	<th class="form-group col-md-1 custo" style="background-color: white; text-align: center;"><label class="info2" style="margin-top: 10px;"><strong>Rateio</strong></label></th>
																</tr>
															</thead>
															<tbody>
																<tr id="LINHA" style="border: hidden !important">
																	<!-- =============================================================================================== -->
																	<!-- COLUNA EXCLUIR -->
																	<td style="vertical-align: middle; text-align: center; padding-top:5px; padding-bottom: 5px;" class="exclusao">
																		<a class="btn btn-danger" id="BTNREMOVER" name="BTNREMOVER" onclick="fnCustomDelete(this);"><i class="fluigicon fluigicon-trash fluigicon-sm"></i></a>
																	</td>
																	<!-- ====================================================================================== -->
	                                                                <!-- Sequencial -->
	                                                                <td style="vertical-align: middle; text-align: center; padding-top:5px; padding-bottom: 5px;">
	                                                                	<input id="SEQTBITEM" name="SEQTBITEM" class="form-control" type="text" style="font-size: 14px; text-align: center;padding-right: 3px; padding-left: 3px;" readonly>
	                                                                	<input id="NSEQPED" name="NSEQPED" type="hidden"/>
	                                                                	<input id="NUMEROSEQUENCIAL" name="NUMEROSEQUENCIAL" type="hidden"/>
	                                                                </td>
	                                                                <!-- ====================================================================================== -->
	                                                                <!-- CÓDIGO -->
	                                                                <td style="vertical-align: middle; text-align: center; padding-top:5px; padding-bottom: 5px;" class="custo">
	                                                                	<input id="CODIGO" name="CODIGO" class="form-control" type="text" style="font-size: 14px; text-align: center;padding-right: 3px; padding-left: 3px;" readonly>
	                                                                </td>
																	<!-- =============================================================================================== -->
																	<!-- COLUNA CAMPO 1 -->
																	<td style="vertical-align: middle; text-align: center; padding-top:5px; padding-bottom: 5px;">
																		<input id="ITEMTB" name="ITEMTB" class="form-control" type="text" onmouseover="mouse(this);"/>
																		<!-- <input
																	      	type="zoom"
																	      	id = "ITEMTB"
																	      	name="ITEMTB"
																	      	data-zoom="{
																	        	'displayKey':'DESCRICAO',
																		        	'datasetId':'dsCRMSUP001ItensContrato',
																		        	'placeholder':'Selecione o Item',
																		        	'fields':[
																		             	{
																		                	'field':'DESCRICAO',
																		             		'label':'Item',
																		             		'standard':'true'
																		           		}
																		            ]
																		      	}"
																		/>
																		 -->
																	</td>
																	
																	<!-- ====================================================================================== -->
	                                                                <!-- Pesquisa -->
	                                                                <td class="pesquisa" style="vertical-align: middle; text-align: center; padding-top:5px; padding-bottom: 5px; padding-left: 0px; padding-right: 0px;">
	                                                                    
	                                                                         <span id="PESQUISADETALHES" name="PESQUISADETALHES" onclick="setPesquisaItem(this)">
	                                                                        	 
	                                                                            <a href="#abrirModalPesquisa" title="Click aqui para pesquisar a lista de itens"><i class="fluigicon fluigicon-search icon-md"></i></a>
	                                                                        </span>
	                                                                    
	                                                                     <input id="PESQUISAGENERICO" name="PESQUISAGENERICO" type="hidden">
	                                                                </td>
												
																	<!-- =============================================================================================== -->
																	<!-- COLUNA CAMPO 2 -->
																	<td style="vertical-align: middle; text-align: center; padding-top:5px; padding-bottom: 5px;">
																		<input id="UNDITEM" name="UNDITEM" class="form-control" type="text" style="font-size: 14px; padding-right: 3px; padding-left: 3px; text-align: right;" readonly/>
																		<input id="OSOBRIGATORIAITEM" name="OSOBRIGATORIAITEM" type="hidden">
																	</td>
																	
																	<!-- =============================================================================================== -->
																	<!-- COLUNA PRECO PTAX -->
																	<td class="colunaPTAX" style="vertical-align: middle; text-align: center; padding-top:5px; padding-bottom: 5px;">
																		<div class="input-group">
																			<span class="input-group-addon"><strong>US$</strong></span>
																			<input id="PRECOPTAX" name="PRECOPTAX" class="form-control" type="text" style="font-size: 14px; padding-right: 3px; padding-left: 3px; text-align: right;" readonly/>
																		</div>
																	</td>

																	<!-- =============================================================================================== -->
																	<!-- COLUNA PRECO UNITARIO -->
																	<td class="colunaPrecoUn" style="vertical-align: middle; text-align: center; padding-top:5px; padding-bottom: 5px;">
																		<div class="input-group">
																			<span class="input-group-addon"><strong>R$</strong></span>
																			<input id="PRECOUN" name="PRECOUN" class="form-control" type="text" style="font-size: 14px; padding-right: 3px; padding-left: 3px; text-align: right;" readonly/>
																			<input id="SEQCRIACAO" name="SEQCRIACAO" type="hidden">
																		</div>
																	</td>
																	
																	<!-- =============================================================================================== -->
																	<!-- COLUNA CAMPO 3 -->
																	<td style="vertical-align: middle; text-align: center; padding-top:5px; padding-bottom: 5px;">
																		<input id="QTD" name="QTD" class="form-control" type="text" style="font-size: 14px; padding-right: 3px; padding-left: 3px; text-align: right;" onchange="replacePonto(this); calcTotalBMS(); calTotItem(this); " onkeypress="return onlynumber();"/>
																	</td>
																	
																	<!-- =============================================================================================== -->
																	<!-- COLUNA CAMPO 2 -->
																	<td style="vertical-align: middle; text-align: center; padding-top:5px; padding-bottom: 5px;">
																		<div class="input-group">
																			<span class="input-group-addon"><strong>R$</strong></span>
																			<input id="PRECOTOT" name="PRECOTOT" class="form-control" type="text" style="font-size: 14px; padding-right: 3px; padding-left: 3px; text-align: right;" readonly/>
																		</div>
																	</td>
																	
																	<td style="vertical-align: middle; text-align: center; padding-top:5px; padding-bottom: 5px;" class="custo">
																		<a href="#abrirModalCCU" class="btn btn-primary fluigicon fluigicon-zoom-in fluigicon-sm" id="BTNRATEIO" name="BTNRATEIO" onclick="carregaTabelaCCU(this);"></a>
																	</td>
																</tr>
															</tbody>
															<tfoot class="btnADDclass">
																<tr>
																	<td style="vertical-align: middle; text-align: center; padding-top:5px; padding-bottom: 5px;" class="exclusao">
																		<a class="btn btn-warning fluigicon fluigicon-plus fluigicon-sm" id="BTNADDITEM" name="BTNADDITEM" onclick="childAdd();"></a>
																	</td>
																</tr>
															</tfoot>
														</table>
													</div>
												</div>
											</div>

										</div>
										
										<div id="abrirModalCCU" class="modal">
										    <div class="form-group col-md-1"></div>
										    
										    <!-- TABELA PARA PREECNHER OS RATEIOS POR CENTRO DE CUSTO DOS ITENS -->
										    <div class="form-group col-md-10 RATEIO_CCU_ITENS" style="margin-bottom: 20px !important;">
										        <div class="form-group col-md-12"></div>
										        <div>
										            <a href="#fecharCCU" id="fecharCCU" onclick="limpaTabelaCCUModal()" title="Fechar" class="fechar"><strong>X</strong></a>
										        </div>
										
										        <div class="text-center tituloTabela titulo">
										            <h3 style="color: #D9A526 !important; text-align: center !important;">RATEIO CENTRO DE CUSTO</h3><br>
										        </div>
										                                                
										        <table tablename="RATEIO_CCU_ITENS" class="table table-layout-fixed table-hover" border="0" nodeletebutton="true" noaddbutton="true">
										            <thead>
										                <tr>
										                    <th class="form-group col-md-1 RATEIO_EXCLUIR_ITEM"><label class="info"><strong></strong></label></th>
										                    <th class="form-group col-md-4 RATEIO_CODCCUSTO_ITEM"><label class="info"><strong>Centro de Custo</strong></label></th>
										                    <th class="form-group col-md-2 RATEIO_CCU_VALOR_ITEM"><label class="info"><strong>Percent.</strong></label></th>
										                    <th class="form-group col-md-3 RATEIO_CCU_PERC_ITEM"><label class="info"><strong>Valor</strong></label></th>
										                	<th class="form-group col-md-3 RATEIO_CCU_OS_ITEM"><label class="info"><strong>OS</strong></label></th>
										                </tr>
										            </thead>
										            <tbody>
										                <tr id="LINHA">
										                    <td class="EXCLUIR_RATEIO_CCU_ITEM" style="vertical-align: middle; text-align: center; padding-top:5px; padding-bottom: 5px;">
										                    	<a class="btn btn-primary EXCLUIRITEM" id="EXCLUIRITEM" name="EXCLUIRITEM" onclick="excluirRateioCCU(this)"><i class="fluigicon fluigicon-trash icon-sm"></i></a>
										                        <!--<button class="btn btn-primary EXCLUIRITEM" id="EXCLUIRITEM" name="EXCLUIRITEM" onclick="excluirRateioCCU(this)"><i class="fluigicon fluigicon-trash icon-sm"></i></button>-->
										                    </td>
										
										                    <td class="CENTROCUSTOITEM">
										                        <input
										                            type="zoom"
										                            id = "CENTROCUSTOITEM"
										                            name="CENTROCUSTOITEM"
										                            data-zoom="{
										                                'displayKey':'DESCCOMPLETA',
										                                'datasetId':'dsCRMEST001CCusto',
										                                'maximumSelectionLength':'1',
										                                'placeholder':'Selecione Centro de Custo',
										                                'fields':[
										                                    {
										                                        'field':'DESCCOMPLETA',
										                                        'label':'Cód. - Descrição',
										                                        'standard':'true'
										                                    }
										                                ]
										                            }"
										                        />
										                        <input type="hidden" id="CODCCUSTOITEM" name="CODCCUSTOITEM">
										                        <input type="hidden" id="DESCRICAOCCUITEM" name="DESCRICAOCCUITEM">
										                    </td>
										
										                    <td class="RATEIO_CCU_VALOR_ITEM">
										                        <div class="input-group">
										                            <input type="text" title="" data-content="" id="PERCENTUALITEM" name="PERCENTUALITEM" class="form-control"
										                            onchange="limitaPorcentagemTabelaRateioItem(this);converteValor(this);valorPorPercentual(this)">
										                                <span class="input-group-addon">
										                                    <span class="text">%</span>
										                                </span>
										                            <input id="CODIGOPRODUTOCCU" name="CODIGOPRODUTOCCU" class="form-control" type="hidden">
										                            <input id="SEQTABELA" name="SEQTABELA" class="form-control" type="hidden">
										                        </div>
										                    </td>
										                    <td class="RATEIO_CCU_PERC_ITEM">
										                        <div class="input-group">
										                            <span class="input-group-addon">
										                                <span class="text">R$</span>
										                            </span>
										                            <input type="text" title="" data-content="" id="PERCENTUALITEM2" name="PERCENTUALITEM2" class="form-control" onchange="limitaValorTabelaRateioItem(this);converteValor(this);percentualPorValor(this)">
										                            <input id="CODIGOPRODUTOCCU2" name="CODIGOPRODUTOCCU2" class="form-control" type="hidden">
										                            <input id="SEQTABELA2" name="SEQTABELA2" class="form-control" type="hidden">
										                        </div>
										                    </td>
										                    
															<td class="CENTROCUSTOITEMOS">
                                                            <input
		                                                        type="zoom"
		                                                        id = "CENTROCUSTOITEMOS"
		                                                        name="CENTROCUSTOITEMOS"
		                                                        data-zoom="{
		                                                            'displayKey':'OS',
		                                                            'datasetId':'dsCRMEST001Os',
		                                                            'maximumSelectionLength':'1',
		                                                            'placeholder':'Selecione OS',
		                                                            'fields':[
		                                                                {
		                                                                    'field':'OS',
		                                                                    'label':'OS - Descrição',
		                                                                    'standard':'true'
		                                                               	 }
	                                                                ]
		                                                        }"
		                                                    />
                                                            <input type="hidden" id="CENTROCUSTOITEMOSTXT" name="CENTROCUSTOITEMOSTXT">
                                                            <input type="hidden" id="DESCRICAOCCUITEMOS" name="DESCRICAOCCUITEMOS">
                                                        </td>
										                </tr>
										            </tbody>
										            <tfoot>
										                <tr>
										                    <td style="vertical-align: middle; text-align: center; padding-top:5px; padding-bottom: 5px;">
										                    	<a id="ADDCCITEMRATEIO" name="ADDCCITEMRATEIO" class="btn btn-primary fluigicon fluigicon-plus fluigicon-sm" onclick="addRateioCCUItens();"></a>
										                        <!--<button id="ADDCCITEMRATEIO" name="ADDCCITEMRATEIO" class="btn btn-primary fluigicon fluigicon-plus fluigicon-sm" onclick="addRateioCCUItens();"></button>-->
										                    </td>
										                </tr>                                                                
										            </tfoot>      
										        </table>
										        <div class="form-group col-md-1">
										        	<a id="SALVACCITEM" name="SALVACCITEM" class="btn btn-primary btn-md" onclick="salvaCcItens()">Salvar</a>
										            <!--<button id="SALVACCITEM" name="SALVACCITEM" class="btn btn-primary btn-md" onclick="salvaCcItens()">Salvar</button>-->
										        </div>
										    </div>
										</div>

										<div id="abrirModalPesquisa" class="modal" >

                                    		<div class="form-group col-md-1"></div>
                                            
	                                        <div class="form-group col-md-10 RATEIO_CCU_ITENS" style="margin-bottom: 20px !important;height: 75%!important;top: 10%!important;">
	                                    		<div class="form-group col-md-12"></div>
	                                            <div>
	                                                <a href="#fecharCCU" id="fecharCCU" title="Fechar" class="fechar" onclick="fecharPesquisa()" ><i class="flaticon flaticon-chevron-left icon-thumbnail-xs"> </i></a>
	                                            </div>
	                                    
	                                            <div class="text-center tituloTabela titulo">
	                                                <h3 style="color: #D9A526 !important; text-align: center !important;">PESQUISA DE ITENS</h3><br>
	                                            </div>
	                                             
	                                        	<div class="form-inline col-md-12">
	                                                <input id="PESQUISADESCRICAO" name="PESQUISADESCRICAO" class="form-control" style="width: 85%;" type="text">
	                                                <button type="button" class="btn btn-primary" style="width: 14%;" onclick="pesquisaItens();">PESQUISAR</button>
	                                            </div>

												<div style="width: 100%;">
												
													<div class="row">
														<div class="form-group col-md-12">

															<table id = "TABELAPESQUISA" tablename="TABELAPESQUISA" class="table table-layout-fixed table-hover" border="0" nodeletebutton="true" noaddbutton="true">
												
																<thead>

																	<tr class="fs-overflow-y-auto fs-overflow-x-auto">
																		<th style="width:5%; background-color: white; text-align: center;" class="excluir"><label class="info2" style="margin-top: 10px;"><strong></strong></label></th>
																		<th style="width: 12%; background-color: white; text-align: center;"><label class="info2" style="margin-top: 10px;"><strong>Codigo</strong></label></th>
																		<th style="width: 52%; background-color: white; text-align: center;"><label class="info2" style="margin-top: 10px;"><strong>Descrição</strong></label></th>
																		<th style="width: 8%; background-color: white; text-align: center;"><label class="info2" style="margin-top: 10px;"><strong>UN</strong></label></th>
																		<th class="colunaPrecoUn" style="width: 10%; background-color: white; text-align: center;"><label class="info2" style="margin-top: 10px;"><strong>Valor</strong></label></th>
																		<th class="colunaPTAX" style="width: 10%; background-color: white; text-align: center;"><label class="info2" style="margin-top: 10px;"><strong id="PTAXPESQ">Preço </strong></label></th>
																	</tr>
													
																</thead>
															
																<tbody>
									
																	<tr id="LINHAPESQUISA">
																		<div>

																			<td style="vertical-align: middle; text-align: center; padding-top:5px; padding-bottom: 5px;">

																				
																				<a class="btn btn-primary btn-md" id="SELECIONAR" name="SELECIONAR" onclick="verificaItensSelecionados(this);"><i class="fluigicon fluigicon-verified icon-sm" ></i></a>
																					
																			</td>
														
																			<td style="vertical-align: middle; text-align: center; padding-top:5px; padding-bottom: 5px;">
																				<input id="CODIGOPESQUISA" name="CODIGOPESQUISA" class="form-control" type="text" style="color:  #000000;font-size: 14px; padding-right: 3px; padding-left: 3px;" readonly>
																				<input id="NSEQPEDPESQUISA" name="NSEQPEDPESQUISA" type="hidden">
																				<input id="NUMEROSEQPESQUISA" name="NUMEROSEQPESQUISA" type="hidden">
																			
																			</td>
																			<td style="vertical-align: middle; text-align: center; padding-top:5px; padding-bottom: 5px;">
																				<textarea id="DESCRICAOPESQUISA" name="DESCRICAOPESQUISA" rows="1" class="form-control"  style="resize: none;font-size: 14px; padding-right: 3px; padding-left: 3px; background-color:#ffffff !important;; color:  #000000;" readonly></textarea>
																			</td>
																			<td style="vertical-align: middle; text-align: center; padding-top:5px; padding-bottom: 5px;">
																				<input id="UNIDADEPESQUISA" name="UNIDADEPESQUISA" class="form-control" type="text" style="font-size: 14px; padding-right: 3px; padding-left: 3px;color:  #000000;" readonly>
																			</td>
																			<td class="colunaPrecoUn" style="vertical-align: middle; text-align: center; padding-top:5px; padding-bottom: 5px;">
																				<input id="VALORUN" name="VALORUN" class="form-control" type="text" style="font-size: 14px; padding-right: 3px; padding-left: 3px; color:  #000000;" readonly>
																			</td>

																			<td class="colunaPTAX" style="vertical-align: middle; text-align: center; padding-top:5px; padding-bottom: 5px;">
																				<input id="PRECOPTAXPESQ" name="PRECOPTAXPESQ" class="form-control" type="text" style="font-size: 14px; padding-right: 3px; padding-left: 3px; color:  #000000;" readonly>
																			</td>
																		</div>
																		
																	</tr>

																</tbody>
																<tfoot>
																	<tr>
																	</tr>                                                             
																</tfoot>
																	
															</table>
														</div>
													</div>
												</div>
	                                       	</div>
	                                    </div>
									

										<div class="form-group col-md-12" id="divCCUGLOBAL" style="display: none;">
										    <table id = "CCUITENSGLOBAL" tablename="CCUITENSGLOBAL" class="table table-bordered" border="0" nodeletebutton="true" noaddbutton="true">
										        <thead>
										            <tr></tr>
										        </thead>
										        <tbody>
										            <tr id="LINHACCUGLOBAL">
										                <td>
										                    <div class="row INFO_ITENS">
										                        <div class="form-group col-md-2">
										                            <label class="info label-CRM">Codigo do Produto</label>
										                            <input type="hidden" title="" id="CODPRODUTOCCUITENS" name="CODPRODUTOCCUITENS" class="form-control formatacaoCRM" readonly>
										                        </div>
										
										                        <div class="form-group col-md-2">
										                            <label class="info label-CRM">Cod do centro de custo</label>
										                            <input type="text" id="CODCCUITENS" name="CODCCUITENS" class="form-control formatacaoCRM" readonly>
										                        </div>
										
										                        <div class="form-group col-md-2">
										                            <label class="info label-CRM">Percentual</label>
										                            <input type="text" id="PERCENTUALCCUITENS" name="PERCENTUALCCUITENS" class="form-control formatacaoCRM" readonly>
										                        </div>
										
										                        <div class="form-group col-md-2">
										                            <label class="info label-CRM">Valor</label>
										                            <input type="text" id="VALORCCUITENS" name="VALORCCUITENS" class="form-control formatacaoCRM" readonly>
										                        </div>
										
										                        <div class="form-group col-md-2">
										                            <label class="info label-CRM">OS</label>
										                            <input type="text" id="OSCCUITENS" name="OSCCUITENS" class="form-control formatacaoCRM" readonly>
										                        </div>
										                        <div class="form-group col-md-2">
										                            <label class="info label-CRM">SEQ</label>
										                            <input type="text" id="SEQCCUITENS" name="SEQCCUITENS" class="form-control formatacaoCRM" readonly>
										                        </div>
										                        
										                        <div class="form-group col-md-2">
										                            <label class="info label-CRM">Descrição</label>
										                            <input type="text" id="DESCRICAOCCUITEMGLOBAL" name="DESCRICAOCCUITEMGLOBAL" class="form-control formatacaoCRM" readonly>
										                        </div>
										                    </div>
										                </td>
										            </tr>
										        </tbody>
										    </table>
										</div>

										

										<div id="divIDF">
											<div class="row">
												<div class="form-group col-md-12">
													<hr class="hr"/>
												</div>
											</div>
											
											<div class="row">
												<div class="form-group col-md-12" style="text-align: center;">
													<label class="secao">VALIDAÇÃO TÉCNICA - IDF</label>
												</div>
											</div>
											
											<div class="row">
												<!-- ================================================================= -->
												<div class="form-group col-md-4">
													<label class="info">Atendimento ao Escopo</label>
													<input
												      	type="zoom"
												      	id = "ATENDESCOPO"
												      	name="ATENDESCOPO"
												      	data-zoom="{
												        	'displayKey':'DESCCOMPLETA',
													        	'datasetId':'dsCRMSUP001Escopo',
													        	'placeholder':'Selecione Atendimento ao Escopo',
													        	'fields':[
													             	{
													                	'field':'DESCCOMPLETA',
													             		'label':'Atendimento ao Escopo',
													             		'standard':'true'
													           		}
													            ]
													      	}"
													/>
													<input id="ATENDESCOPOTXT" name="ATENDESCOPOTXT" type="hidden">
												</div>
												
												<div class="form-group col-md-4">
													<label class="info">Entrega dos Serviços no Prazo</label>
													<input
												      	type="zoom"
												      	id = "ENTREGAPRAZO"
												      	name="ENTREGAPRAZO"
												      	data-zoom="{
												        	'displayKey':'DESCCOMPLETA',
													        	'datasetId':'dsCRMSUP001ServPrazo',
													        	'placeholder':'Selecione Entrega no Prazo',
													        	'fields':[
													             	{
													                	'field':'DESCCOMPLETA',
													             		'label':'Entrega Serviços no Prazo',
													             		'standard':'true'
													           		}
													            ]
													      	}"
													/>
													<input id="ENTREGAPRAZOTXT" name="ENTREGAPRAZOTXT" type="hidden">
												</div>
												
												<div class="form-group col-md-4">
													<label class="info">Qualidade</label>
													<input
												      	type="zoom"
												      	id = "QUALIDADE"
												      	name="QUALIDADE"
												      	data-zoom="{
												        	'displayKey':'DESCCOMPLETA',
													        	'datasetId':'dsCRMSUP001Qualidade',
													        	'placeholder':'Selecione a Qualidade',
													        	'fields':[
													             	{
													                	'field':'DESCCOMPLETA',
													             		'label':'Qualidade',
													             		'standard':'true'
													           		}
													            ]
													      	}"
													/>
													<input id="QUALIDADETXT" name="QUALIDADETXT" type="hidden">
												</div>
											</div>
											
											<div class="row">
												<div class="form-group col-md-3">
													<label class="info">Segurança</label>
													<input
												      	type="zoom"
												      	id = "SEGURANCA"
												      	name="SEGURANCA"
												      	data-zoom="{
												        	'displayKey':'DESCCOMPLETA',
													        	'datasetId':'dsCRMSUP001Seguranca',
													        	'placeholder':'Selecione a Segurança',
													        	'fields':[
													             	{
													                	'field':'DESCCOMPLETA',
													             		'label':'Segurança',
													             		'standard':'true'
													           		}
													            ]
													      	}"
													/>
													<input id="SEGURANCATXT" name="SEGURANCATXT" type="hidden">
												</div>
												
												<div class="form-group col-md-3">
													<label class="info">Meio Ambiente</label>
													<input
												      	type="zoom"
												      	id = "MEIOAMBIENTE"
												      	name="MEIOAMBIENTE"
												      	data-zoom="{
												        	'displayKey':'DESCCOMPLETA',
													        	'datasetId':'dsCRMSUP001MeioAmbiente',
													        	'placeholder':'Selecione Meio Ambiente',
													        	'fields':[
													             	{
													                	'field':'DESCCOMPLETA',
													             		'label':'Meio Ambiente',
													             		'standard':'true'
													           		}
													            ]
													      	}"
													/>
													<input id="MEIOAMBIENTETXT" name="MEIOAMBIENTETXT" type="hidden">
												</div>
												
												<div class="form-group col-md-3">
													<label class="info">BMS Entregue no Prazo</label>
													<input
												      	type="zoom"
												      	id = "BMSPRAZO"
												      	name="BMSPRAZO"
												      	data-zoom="{
												        	'displayKey':'DESCCOMPLETA',
													        	'datasetId':'dsCRMSUP001BMSPrazo',
													        	'placeholder':'Selecione BMS Entregue no Prazo',
													        	'fields':[
													             	{
													                	'field':'DESCCOMPLETA',
													             		'label':'BMS Entregue no Prazo',
													             		'standard':'true'
													           		}
													            ]
													      	}"
													/>
													<input id="BMSPRAZOTXT" name="BMSPRAZOTXT" type="hidden">
												</div>
												
												
												<div class="form-group col-md-3">
													<label class="info">NF Entregue no Prazo</label>
													<input
												      	type="zoom"
												      	id = "IDFPRAZO"
												      	name="IDFPRAZO"
												      	data-zoom="{
												        	'displayKey':'DESCCOMPLETA',
													        	'datasetId':'dsCRMSUP001IDFPrazo',
													        	'placeholder':'Selecione ID Entregue no Prazo',
													        	'fields':[
													             	{
													                	'field':'DESCCOMPLETA',
													             		'label':'ID no Prazo',
													             		'standard':'true'
													           		}
													            ]
													      	}"
													/>
													<input id="IDFPRAZOTXT" name="IDFPRAZOTXT" type="hidden">
												</div>
											</div>
											
											<div class="row">
												<div class="form-group col-md-12">
													<label class="info">Comentários da Validação</label>
													<textarea id="COMENTARIOS" name="COMENTARIOS" class="form-control" style="resize: none;" rows="2"></textarea>
												</div>
											</div>
										</div>
										
										<div id="divLABELAPROVACAO">
											<div class="row">
												<div class="form-group col-md-12">
													<hr class="hr"/>
												</div>
											</div>
										
											<div class="row">
												<div class="form-group col-md-12" style="text-align: center;">
													<label class="secao">APROVAÇÃO</label>
												</div>
											</div>
										</div>
										
										<div class="row" id="divAPROVACAOVALIDADOR">
											<div class="form-group col-md-2">
												<label class="info">Aprova?</label>
												<div class="form-group col-md-12">
													<div class="switch switch-warning switch-labels">
													    <input id="APROVACAOVALIDADOR" name="APROVACAOVALIDADOR" type="checkbox" onchange="aprovacao(this);" data-size="mini" data-on-color="warning" data-on-text="Sim" data-off-color="default" data-off-text="Não" CHECKED>
														<input id="USERVALIDADOR" name="USERVALIDADOR" type="hidden">
													</div>
												</div>									
											</div>
											
											<div class="form-group col-md-10" id="divAPROVACAOVALIDADORMOTIVO">
												<label class="info">Motivo - Validação Técnica</label>
												<textarea id="APROVACAOVALIDADORMOTIVO" name="APROVACAOVALIDADORMOTIVO" class="form-control" style="resize: none;"></textarea>
											</div>
										</div>
										
										<div class="row" id="divAPROVACAOCUSTOS">
											<div class="form-group col-md-2">
												<label class="info">Aprova?</label>
												<div class="form-group col-md-12">
													<div class="switch switch-warning switch-labels">
													    <input id="APROVACAOCUSTOS" name="APROVACAOCUSTOS" type="checkbox" onchange="aprovacao(this);aprovacaoCustos();" data-size="mini" data-on-color="warning" data-on-text="Sim" data-off-color="default" data-off-text="Não" CHECKED>
														<input id="USERCUSTOS" name="USERCUSTOS" type="hidden">
														<div id="divREVISARCUSTOS">
			                                                <label class="info">Revisar</label><br>
			                                                    <input id="REVISARCUSTOSTXT" name="REVISARCUSTOSTXT" type="hidden"> &nbsp;&nbsp;
			                                       				<input id="REVISARCUSTOS" name="REVISARCUSTOS" type="checkbox" 
			                                                    data-size="mini" data-on-color="warning" data-on-text="Sim" data-off-color="default" data-off-text="Não" onchange="revisarCustos();">
			                                            </div>
													</div>
												</div>									
											</div>
											
											<div class="form-group col-md-10" id="divAPROVACAOCUSTOSMOTIVO">
												<label class="info">Motivo - Custos</label>
												<textarea id="APROVACAOCUSTOSMOTIVO" name="APROVACAOCUSTOSMOTIVO" class="form-control" style="resize: none;"></textarea>
											</div>
										</div>
										
										<div class="row" id="divAPROVACAOCOORDCORP">
											<div class="form-group col-md-2">
												<label class="info">Aprova?</label>
												<div class="form-group col-md-12">
													<div class="switch switch-warning switch-labels">
													    <input id="APROVACAOCOORDCORP" name="APROVACAOCOORDCORP" type="checkbox" onchange="aprovacao(this);aprovacaoCoordCorp();" data-size="mini" data-on-color="warning" data-on-text="Sim" data-off-color="default" data-off-text="Não" CHECKED>
														<input id="USERCOORDCORP" name="USERCOORDCORP" type="hidden">

														<div id="divREVISARCOORDCORP">
			                                                <label class="info">Revisar</label><br>
			                                                    <input id="REVISARCOORDCORPTXT" name="REVISARCOORDCORPTXT" type="hidden"> &nbsp;&nbsp;
			                                       				<input id="REVISARCOORDCORP" name="REVISARCOORDCORP" type="checkbox" 
			                                                    data-size="mini" data-on-color="warning" data-on-text="Sim" data-off-color="default" data-off-text="Não" onchange="revisarCoordCorp();">
			                                            </div>

													</div>
												</div>									
											</div>
											
											<div class="form-group col-md-10" id="divAPROVACAOCOORDCORPMOTIVO">
												<label class="info">Motivo - Coordenador Coporativo</label>
												<textarea id="APROVACAOCOORDCORPMOTIVO" name="APROVACAOCOORDCORPMOTIVO" class="form-control" style="resize: none;"></textarea>
											</div>
										</div>
										
										<div class="row" id="divAPROVACAOGERCORP">
											<div class="form-group col-md-2">
												<label class="info">Aprova?</label>
												<div class="form-group col-md-12">
													<div class="switch switch-warning switch-labels">
													    <input id="APROVACAOGERCORP" name="APROVACAOGERCORP" type="checkbox" onchange="aprovacao(this);aprovacaoGerCorp();" data-size="mini" data-on-color="warning" data-on-text="Sim" data-off-color="default" data-off-text="Não" CHECKED>
														<input id="USERGERCORP" name="USERGERCORP" type="hidden">
														<div id="divREVISARGERCORP">
			                                                <label class="info">Revisar</label><br>
			                                                    <input id="REVISARGERCORPTXT" name="REVISARGERCORPTXT" type="hidden"> &nbsp;&nbsp;
			                                       				<input id="REVISARGERCORP" name="REVISARGERCORP" type="checkbox" 
			                                                    data-size="mini" data-on-color="warning" data-on-text="Sim" data-off-color="default" data-off-text="Não" onchange="revisarGerCorp();">
			                                            </div>
													</div>
												</div>									
											</div>
											
											<div class="form-group col-md-10" id="divAPROVACAOGERCORPMOTIVO">
												<label class="info">Motivo - Gerente Corporativo</label>
												<textarea id="APROVACAOGERCORPMOTIVO" name="APROVACAOGERCORPMOTIVO" class="form-control" style="resize: none;"></textarea>
											</div>
										</div>
										
										<div class="row" id="divAPROVACAOVPADM">
											<div class="form-group col-md-2">
												<label class="info">Aprova?</label>
												<div class="form-group col-md-12">
													<div class="switch switch-warning switch-labels">
													    <input id="APROVACAOVPADM" name="APROVACAOVPADM" type="checkbox" onchange="aprovacao(this);" data-size="mini" data-on-color="warning" data-on-text="Sim" data-off-color="default" data-off-text="Não" CHECKED>
														<input id="USERVPADM" name="USERVPADM" type="hidden">
													</div>
												</div>									
											</div>
											
											<div class="form-group col-md-10" id="divAPROVACAOVPADMMOTIVO">
												<label class="info">Motivo - VP Administrativo</label>
												<textarea id="APROVACAOVPADMMOTIVO" name="APROVACAOVPADMMOTIVO" class="form-control" style="resize: none;"></textarea>
											</div>
										</div>
										
										<div class="row" id="divAPROVACAOGERAREA">
											<div class="form-group col-md-2">
												<label class="info">Aprova?</label>
												<div class="form-group col-md-12">
													<div class="switch switch-warning switch-labels">
													    <input id="APROVACAOGERAREA" name="APROVACAOGERAREA" type="checkbox" onchange="aprovacao(this);aprovacaoGerArea();" data-size="mini" data-on-color="warning" data-on-text="Sim" data-off-color="default" data-off-text="Não" CHECKED>
														<input id="USERGERAREA" name="USERGERAREA" type="hidden">
														<div id="divREVISARGERAREA">
			                                                <label class="info">Revisar</label><br>
			                                                    <input id="REVISARGERAREATXT" name="REVISARGERAREATXT" type="hidden"> &nbsp;&nbsp;
			                                       				<input id="REVISARGERAREA" name="REVISARGERAREA" type="checkbox" 
			                                                    data-size="mini" data-on-color="warning" data-on-text="Sim" data-off-color="default" data-off-text="Não" onchange="revisarGerArea();">
			                                            </div>
													</div>
												</div>									
											</div>
											
											<div class="form-group col-md-10" id="divAPROVACAOGERAREAMOTIVO">
												<label class="info">Motivo - Gerente Área</label>
												<textarea id="APROVACAOGERAREAMOTIVO" name="APROVACAOGERAREAMOTIVO" class="form-control" style="resize: none;"></textarea>
											</div>
										</div>
										
										<div class="row" id="divAPROVACAOGG">
											<div class="form-group col-md-2">
												<label class="info">Aprova?</label>
												<div class="form-group col-md-12">
													<div class="switch switch-warning switch-labels">
													    <input id="APROVACAOGG" name="APROVACAOGG" type="checkbox" onchange="aprovacao(this);" data-size="mini" data-on-color="warning" data-on-text="Sim" data-off-color="default" data-off-text="Não" CHECKED>
														<input id="USERGG" name="USERGG" type="hidden">
													</div>
												</div>									
											</div>
											
											<div class="form-group col-md-10" id="divAPROVACAOGGMOTIVO">
												<label class="info">Motivo - Gerente Geral</label>
												<textarea id="APROVACAOGGMOTIVO" name="APROVACAOGGMOTIVO" class="form-control" style="resize: none;"></textarea>
											</div>
										</div>
										
										<div class="row" id="divAPROVACAOVPOP">
											<div class="form-group col-md-2">
												<label class="info">Aprova?</label>
												<div class="form-group col-md-12">
													<div class="switch switch-warning switch-labels">
													    <input id="APROVACAOVPOP" name="APROVACAOVPOP" type="checkbox" onchange="aprovacao(this);" data-size="mini" data-on-color="warning" data-on-text="Sim" data-off-color="default" data-off-text="Não" CHECKED>
														<input id="USERVPOP" name="USERVPOP" type="hidden">
													</div>
												</div>									
											</div>
											
											<div class="form-group col-md-10" id="divAPROVACAOVPOPMOTIVO">
												<label class="info">Motivo - VP Operações</label>
												<textarea id="APROVACAOVPOPMOTIVO" name="APROVACAOVPOPMOTIVO" class="form-control" style="resize: none;"></textarea>
											</div>
										</div>
										
									</div>
								</div>
							</div>
							
						</div>
					</div>
				</div>
			</form>
		</div>
		<script>

			var organizationId = "";
			var _this = this;
			var filter = [];

			function replacePonto(e){
				var seq = $(e).attr("id").split("___")[1];
				console.log("qtd é: " + $("#QTD___" + seq).val());
				var QTD = $("#QTD___" + seq).val().replace(".","").replace(".","").replace(".","").replace(".","").replace(".","");
				console.log("qtd é dps do replace: " + QTD);
				$("#QTD___" + seq).val(QTD);
				definirCasaDecimal(seq);
			};

			function replacePontoDesconto(){
				var desconto = $("#DESCONTO").val().replace(".","").replace(".","").replace(".","").replace(".","").replace(".","");
				
				$("#DESCONTO").val(desconto);
			};

			function definirCasaDecimal(seq){
				var QTD = parseFloat($("#QTD___" + seq).val().replace(",","."));
				QTD = QTD.toFixed(4);
				QTD = QTD.replace(".",",");
				console.log("Definindo casas decimais: " + QTD);
				$("#QTD___" + seq).val(QTD);
			};

			function calTotItem(e){
				var seq = $(e).attr("id").split("___")[1];
				var precoUn = $("#PRECOUN___" + seq).val().replace(".","").replace(".","").replace(".","").replace(".","").replace(".","").replace(",",".");
				var qtd = $("#QTD___" + seq).val().replace(",",".");
				var tot = parseFloat(precoUn) * parseFloat(qtd);
				$("#PRECOTOT___" + seq).val( numeroParaMoeda( tot,4 ) );
			};

			
			function calcTotalBMS(){
				console.log("Teste");
				var total = 0;
				$("input[id^='PRECOUN___']").each(function(index, value){
					var seq = $(this).attr("id").split("___")[1];
					var precoUn = $("#PRECOUN___" + seq).val().replace(".","").replace(".","").replace(".","").replace(".","").replace(".","").replace(",",".");
					precoUn = numeroParaMoeda(precoUn).replace(".","").replace(".","").replace(".","").replace(".","").replace(".","").replace(",",".");
					var qtd = $("#QTD___" + seq).val().replace(".","").replace(".","").replace(".","").replace(".","").replace(".","").replace(",",".");
					
					total = parseFloat(total) + ( parseFloat(precoUn) * parseFloat(qtd) );
					$("#PRECOUN___" + seq).val( numeroParaMoeda(precoUn) );
				});
				
				var desconto = $("#DESCONTO").val().replace(".","").replace(".","").replace(".","").replace(".","").replace(".","").replace(",",".");
				if(desconto == "" ||desconto == null){
					desconto = 0;
				}
				total = total - parseFloat(desconto);
					

				$("#BMSATUAL").val( numeroParaMoeda(total) );
			};
			
			function numeroParaMoeda(n,c,d,t){
			    c = isNaN(c = Math.abs(c)) ? 2 : c, d = d == undefined ? "," : d, t = t == undefined ? "." : t, s = n < 0 ? "-" : "", i = parseInt(n = Math.abs(+n || 0).toFixed(c)) + "", j = (j = i.length) > 3 ? j % 3 : 0;
			    return s + (j ? i.substr(0, j) + t : "") + i.substr(j).replace(/(\d{3})(?=\d)/g, "$1" + t) + (c ? d + Math.abs(n - i).toFixed(c).slice(2) : "");
			};
			
			function fnCustomDelete(oElement){
				fnWdkRemoveChild(oElement);
				calcTotalBMS();
			};
			
			function calculaPorcentagem(){
				var bmsAtual = parseFloat($("#BMSATUAL").val().replace(".", ""));
				console.log("BMS Atual: " + bmsAtual);
				var bmsPrevisto = $("#BMSPREVISTO").val().replace(".", "");
				if(bmsPrevisto == "" || bmsPrevisto == null || bmsPrevisto == NaN){
					bmsPrevisto = 0;
					var porcentagem = 100;
				}else{
					var porcentagem = -1*((( parseFloat(bmsPrevisto)/bmsAtual)*100)-100);
				}
							
				$("#VARIACAOBMS").val( porcentagem.toFixed(2));
				
			};
			
			function calculaPorcentagem2(){
				var bmsAtual = parseFloat($("#BMSATUAL").val().replace(".", ""));
				console.log("BMS Atual: " + bmsAtual);
				var bmsAnterior = $("#BMSANTERIOR").val().replace(".", "");

				if(bmsAnterior == "" || bmsAnterior == null || bmsAnterior == NaN){
					bmsAnterior = 0;
					var porcentagem = 100;
				}else{
					var porcentagem = -1*((( parseFloat(bmsAnterior)/bmsAtual)*100)-100);
				}
				
				$("#VARIACAOBMS2").val( porcentagem.toFixed(2));
				
			};
			
			function dadosContrato(){
				console.log("Entrei dados Contrato");
				$('table[tablename=ITENSCONTRATO] tbody tr').not(':first').remove();
				childAdd();
				$("#BMSATUAL").val("");
				var contrato = $("#CONTRATO").val().split(" /")[0];
				var contratotxt = $("#CONTRATO").val().split(" / ")[1];
				
				$("#CONTRATOTXT").val( contratotxt );
				
				var c1 = DatasetFactory.createConstraint("IDMOV", contrato, contrato, ConstraintType.MUST);
				var constraints = new Array(c1);

				var dataset = loadPublicDataset("dadosContratos",null,constraints,null);

				var row = dataset.values;
				var count = dataset.values.length;
				for(var i = 0; i < count; i++){
					var rep = row[i];
					var bmsPrev = rep["BMSPREVISTO"];
					var bmsAnterior = rep["BMSANTERIOR"];
					var SALDO = rep["SALDO"];
					var movimento = rep["MOVIMENTO"];
					var idfsimnao = rep["IDF"];
					$("#CODCONTRATO").val( movimento );
					$("#BMSPREVISTO").val( numeroParaMoeda(bmsPrev) );
					$("#BMSANTERIOR").val( numeroParaMoeda(bmsAnterior) );
					$("#IDFSIMNAO").val( idfsimnao );
					console.log("Minha Filial: " + rep["FILIAL"]);
					$("#FILIAL").val( rep["FILIAL"] );
					$("#DADOSFILIAL").val( rep["DADOSFILIAL"] );
					$("#ENDERECOFILIAL").val( rep["ENDERECOFILIAL"] );
					$("#EMISSAO").val( rep["EMISSAO"] );
					$("#FIMCONTRATO").val( rep["FIMCONTRATO"] );
					$("#CODCFO").val( rep["CODCFO"] );
					$("#NOMECFO").val(rep["NOME"]);
					$("#CODLOC").val( rep["CODLOC"] );
					$("#VALOR").val( rep["VALOR"] );
					$("#SALDO").val( numeroParaMoeda(SALDO) );
					$("#CODCPG").val( rep["CODCPG"] );
					$("#MOEDA").val( rep["MOEDA"] );
				};

				if($("#MOEDA").val() != "R$" ){
					$("#divMOEDA").show();
					$("#divITENSCONTRATO").hide();
					$(".colunaPTAX").show();
					$(".colunaPrecoUn").hide();
					$("#PTAX").html( "Preço " + $("#MOEDA").val() );
					$("#PTAXPESQ").html( "Preço " + $("#MOEDA").val() );
					
					Swal.fire({
					  title: 'Contrato em ' + $("#MOEDA").val(),
  					  html: 'Favor inserir a cotação em reais',
					  input: 'text',
					  inputAttributes: {
					    autocapitalize: 'off'
					  },
					  
					  confirmButtonText: 'Salvar',
					  showLoaderOnConfirm: true,
					  preConfirm: (login) => {
					  	console.log("Teste1" + `${login}`);
					  	$("#COTACAODOLAR").val( `${login}` );
					  	$("#divITENSCONTRATO").show();
					  	/*atualizaRealDolar();*/
					  },
					  allowOutsideClick: () => !Swal.isLoading()
					})

				};
				
				$("input[id^='PRECOUN___']").each(function(index, value){
					var seq = $(this).attr("id").split("___")[1];
					console.log( " ------ > reload contrato " + $("#CONTRATO").val() );
					console.log( " ------ > reload contrato ---> seq " + seq);
					
				    var settings = {
						source: {
							url: parent.WCMAPI.getServerURL() + "/digtedpfweb/v1/rest/proxyDatasetFilter/"  + organizationId + "?datasetId=ds_dpf_getDatasetFilter&filterFields=dpfDatasetId,itensContrato,IDMOV," + $("#CONTRATO").val().split(" /")[0] + "&searchField=DESCRICAO&",
							contentType: 'application/json',
							root: 'content',
							pattern: '',
							limit: 2,
							offset: 2,
							patternKey: 'searchValue',
							limitkey: 'limit',
							offsetKey: 'offset'
						},
						displayKey: 'DESCRICAO',
						multiSelect: false,
						style: {
							autocompleteTagClass: 'tag-gray',
							tableSelectedLineClass: 'info'
						}
					};

					console.log(settings);	

					console.log("--------");	

					console.log(_this.filter);	
				
					console.log("--------");	

					_this.filter[seq].reload(settings);


					_this.filter[seq].on('fluig.filter.item.added', function(data){
 

	                    console.log("--------4444441");    

	                    console.log(data);

	                    var seq = data.target.name.split("___")[1];

	                    /*var precoUnConvert = numeroParaMoeda(data.item.PRECOUNITARIO);*/
	                    var precoUnConvert = parseFloat(data.item.PRECOUNITARIO).toFixed(4);
                   		 $("#PRECOPTAX___" + seq).val(precoUnConvert);

                   		if($("#MOEDA").val() != "R$" ){
                   			var cotacao = parseFloat($("#COTACAODOLAR").val().replace(",", ".")).toFixed(4);
                   			console.log("Multiplicar preço: " + precoUnConvert + "por cotação= " + cotacao);
                   			precoUnConvert = precoUnConvert*cotacao;
                   			precoUnConvert = precoUnConvert.toFixed(4);
                   			console.log("precoUnConvert" + precoUnConvert);
                   		};
                   		precoUnConvert = precoUnConvert + "";
                   		precoUnConvert = precoUnConvert.replace(".", ",");
	                    $("#PRECOUN___" + seq).val(precoUnConvert);

	                    console.log("--------44444442");

                     });   


					_this.filter[seq].on('fluig.filter.itemRemoved', function(data){


	                    console.log("--------66666612222");    

	                    console.log(data);

	                    var seq = data.target.name.split("___")[1];
	                    $("#PRECOPTAX___" + seq).val("0,00");
	                    $("#PRECOUN___" + seq).val("0,00");

	                    console.log("--------666666622222");

                     });   



				});
			};

			function atualizaRealDolar(){
				var bmsPrevisto = parseFloat($("#BMSPREVISTO").val().replace(".","").replace(".","").replace(".","").replace(".","").replace(".","").replace(",","."));
				var bmsAnterior = parseFloat($("#BMSANTERIOR").val().replace(".","").replace(".","").replace(".","").replace(".","").replace(".","").replace(",","."));
				var valor = parseFloat($("#VALOR").val().replace(".","").replace(".","").replace(".","").replace(".","").replace(".","").replace(",","."));
				var saldo = parseFloat($("#SALDO").val().replace(".","").replace(".","").replace(".","").replace(".","").replace(".","").replace(",","."));
				var cotacao = parseFloat($("#COTACAODOLAR").val().replace(",", ".")).toFixed(4);

				console.log("bmsPrevisto: " + bmsPrevisto + " bmsAnterior: " + bmsAnterior + " valor: " + valor + " saldo: " + saldo);
				bmsPrevisto = bmsPrevisto * cotacao;
				bmsAnterior = bmsAnterior * cotacao;
				valor = valor * cotacao;
				saldo = saldo * cotacao;
				console.log("bmsPrevisto: " + bmsPrevisto + " bmsAnterior: " + bmsAnterior + " valor: " + valor + " saldo: " + saldo);

				$("#BMSPREVISTO").val( numeroParaMoeda(bmsPrevisto) );
				$("#BMSANTERIOR").val( numeroParaMoeda(bmsAnterior) );
				$("#VALOR").val( valor );
				$("#SALDO").val( numeroParaMoeda(saldo) );

			}
			
			function conectar(){
				
				var login = $("#LOGIN").val();
				var senha = $("#SENHA").val();
				var myLoading = FLUIGC.loading(window, {
					fadeIn:  200,
				    fadeOut:  200,
				    timeout: 0,
				});
				myLoading.show();
				var c1 = DatasetFactory.createConstraint("CNPJ", login, login, ConstraintType.MUST);
				var c2 = DatasetFactory.createConstraint("SENHA", senha, senha, ConstraintType.MUST);
				var constraints = new Array(c1,c2);
				
				var dataset = loadPublicDataset("buscarLogin",null,constraints,null);

				console.log("-------> " + dataset.values.length);

				
				var count = dataset.values.length;
				for(var i = 0; i< count; i++){
					var ret = dataset.values[i]["RETORNO"];
					
					console.log("-------> " + ret);
					
					if(ret == "SUCESSO"){
						
						
						setTimeout(function(){

							console.log("-------> 2222 " );

	 						myLoading.hide();
							const Toast = Swal.mixin({
								toast: true,
								position: 'middle-middle',
								showConfirmButton: false,
								timer: 3000,
								timerProgressBar: true
							});
							Toast.fire({
								icon: 'success',
								title: 'Login Feito com Sucesso'
							});

							console.log("-------> 3333 " );
	 					}, 2500);


						setTimeout(function(){

							console.log("-------> 444444 " );

							$("#divCONTEUDO").show();
							$("#btnAbaixo").show();
							$("#btAddAnexo").show();
							
							$("#divCONEXAO").hide();

														console.log("-------> 55555 " );

							var dataHoje = new Date().toLocaleDateString();
							$("#DTMEDICAO").val( dataHoje );
							/*$("#DTINICIOSERVICO").val( dataHoje );
							$("#DTFINALSERVICO").val( dataHoje );*/
							var c3 = DatasetFactory.createConstraint("CNPJ", login, login, ConstraintType.MUST);
							var constraints2 = new Array(c3);
							
							var dataset2 = loadPublicDataset("contratos",null,constraints2,null);

							var row2 = dataset2.values;
							var count2 = dataset2.values.length;
							var contratos = "<option value=''>Selecione um Contrato</option>";
							if(count2 == 0){
								contratos = "<option value='invalido'>Não foram encontrados contratos</option>";
							}
							else{
								for(var j = 0; j < count2; j++){
									var rep2 = row2[j];
									var contrato = rep2["Contrato"];
									var idmov = rep2["IDMOV"];
									contratos = contratos + "<option value='"+idmov+" / "+contrato+"'>"+contrato+"</option>";
								};
							};
																					console.log("-------> 666666 " );

							/*childAdd();*/

																												console.log("-------> 666666 "  + contratos);


							$("#CONTRATO").html(contratos);
						}, 2300);
					}
					else{
						setTimeout(function(){
							
							myLoading.hide();
							
							Swal.fire({
								icon: 'error',
								title: 'Acesso negado!',
								text: 'Usuário e/ou senha inválido(s)'
							});
							return false;
						}, 2500);
					};
				};
				
			};

			$('#btnConectar').on('click', function(){
				
				console.log("ponto 1");
				conectar();
			
			});
			
			function loadPublicDataset(dpfDatasetId, fields, constraints, order){
				var _this = this; 
				var result = null;
				constraints = constraints == null ? [] : constraints;
				var c1 = DatasetFactory.createConstraint('dpfDatasetId', dpfDatasetId, dpfDatasetId, ConstraintType.MUST);
				constraints.push(c1);
				var request_data = {
					url: parent.WCMAPI.getServerURL() + '/digtedpfweb/v1/rest/proxyDatasets/' + organizationId,  
					method: 'POST',
					ajaxData: JSON.stringify({ name: "ds_dpf_getDatasetProxy", 
											fields : fields, 
											constraints : constraints,
											order : order}),
					data: {}	
				};
				console.log(request_data);
				$.ajax({
					url: request_data.url,
					type: request_data.method,
					data: request_data.ajaxData,
					contentType: "application/json",
					async: false
				})
				.done(function(data){
					console.log(data);
					result = data.content;
				})
				.fail(function(data){
					console.log(data);
					result = data.content;
				});
				return result;
			};
			
			function setPesquisaItem(obj){
				var seq = $(obj).parent().parent().children().children().closest("input[id^='PESQUISAGENERICO___']").attr("id").split("___")[1];
				
				$("#PESQUISAATUAL").val(seq);
				
				console.log("Vou pesquisa o item do item "+seq);

				
				$("#divTITULO").hide();
				$("#divCONTEUDO").hide();
				$("#abrirModalPesquisa").show();
				$("#btnAbaixo").hide();
			    $("#btAddAnexo").hide();
			};
			
			function fecharPesquisa(){
				$("#divTITULO").show();
				$("#divCONTEUDO").show();
				$("#abrirModalPesquisa").hide();
				$("#btnAbaixo").show();
			    $("#btAddAnexo").show();
			};

			function pesquisaItens(){
				limpaPesquisa();
				var pesquisa = $('#PESQUISADESCRICAO').val();

				var contrato = $("#CONTRATO").val();
				if(contrato != "" && contrato != null){
					contrato = contrato.split(" /")[0];
				};

				

				var c1 = DatasetFactory.createConstraint("IDMOV", contrato, contrato, ConstraintType.MUST);
				var c2 = DatasetFactory.createConstraint("DESCRICAO", pesquisa, pesquisa, ConstraintType.MUST);
				var constraints = new Array(c1,c2);

				var dataset = loadPublicDataset("itensContrato",null,constraints,null);
				
				
				
				var tamanho = dataset.values.length;
				
				if(tamanho > 30){
					tamanho = 30;
				}else{
					tamanho = dataset.values.length;
				}

				console.log("tamanho: " + tamanho);
				for(i=0;i<tamanho; i++){
					console.log("Estou no for: " + i);
					var row = addPesquisaItens();
					var idprd = dataset.values[i]["IDPRD"];
					$('#CODIGOPESQUISA___'+row).val(dataset.values[i]["Codigo"]);
					$('#DESCRICAOPESQUISA___'+row).val(dataset.values[i]["DESCRICAO"]);
					atualizaTextArea();
					$('#UNIDADEPESQUISA___'+row).val(dataset.values[i]["CODUND"]);

					var precoUnConvert = parseFloat(dataset.values[i]["PRECOUNITARIO"]).toFixed(4);
                    /*precoUnConvert = precoUnConvert.replace(".", ",");*/
                    $('#PRECOPTAXPESQ___'+row).val(precoUnConvert.replace(".", ","));

                 	if($("#MOEDA").val() != "R$" ){
               			var cotacao = parseFloat($("#COTACAODOLAR").val().replace(",", ".")).toFixed(4);
               			console.log("Multiplicar preço: " + precoUnConvert + "por cotação= " + cotacao);
               			precoUnConvert = precoUnConvert*cotacao;
               			precoUnConvert = precoUnConvert.toFixed(4);
               			console.log("precoUnConvert" + precoUnConvert);
               		};
               		precoUnConvert = precoUnConvert + "";
               		precoUnConvert = precoUnConvert.replace(".", ",");

					$('#VALORUN___'+row).val(precoUnConvert);
					$('#NSEQPEDPESQUISA___'+row).val(dataset.values[i]["NSEQITMMOV"]);
					$('#NUMEROSEQPESQUISA___'+row).val(dataset.values[i]["NUMEROSEQUENCIAL"]);
					
					
				};
			};

			function limpaPesquisa(){
				$("input[id^='CODIGOPESQUISA___']").each(function(index,value){
					var seq = $(this).attr("id").split("___")[1];
					$("#LINHAPESQUISA___"+seq).remove();
				});
			};

			function addPesquisaItens(){
				var row = wdkAddChild('TABELAPESQUISA');
				return row;
			};

			function atualizaTextArea(){
				const txHeight = 30;
				const tx = document.getElementsByTagName("textarea");

				for (let i = 0; i < tx.length; i++) {
					console.log("tx.length: " + tx.length + " tx[i]: " + tx[i] + " tx[i].val : " + tx[i].value);
				  if (tx[i].value == '') {
				    tx[i].setAttribute("style", "height:" + txHeight + "px;overflow-y:hidden;resize: none;");
				  } else {
				    tx[i].setAttribute("style", "height:" + (tx[i].scrollHeight) + "px;overflow-y:hidden;resize: none;");
				  };
				  tx[i].addEventListener("input", OnInput, false);
				};

				function OnInput(e) {
				  this.style.height = "auto";
				  this.style.height = (this.scrollHeight) + "px";
				  this.style.resize = none;
				};

			};

			jQuery('#PESQUISADESCRICAO').keypress(function(event){
				var keycode = (event.keyCode ? event.keyCode : event.which);
				console.log("Teste");
				if(keycode == '13'){
					console.log("TEste");
					pesquisaItens();
				};
			});
				
			function verificaItensSelecionados(e){
				var seq = $(e).attr("id").split("___")[1];
				var codigo = $("#CODIGOPESQUISA___" + seq).val();
				var descricao = $("#DESCRICAOPESQUISA___" + seq).val();
				var unidade = $('#UNIDADEPESQUISA___'+seq).val();
				var valor = $('#VALORUN___'+seq).val();
				var nseqped = $('#NSEQPEDPESQUISA___'+seq).val();
				var nseqPesquisa = $('#NUMEROSEQPESQUISA___'+seq).val();
				var seqProduto =  $("#PESQUISAATUAL").val();
				var valorPTAX = $("#PRECOPTAXPESQ___" + seq).val();
				
				$('#ITEMTB___' + seqProduto).parent().parent().zIndex(1000);
				var item = {DESCRICAO: descricao};
				console.log(item);
				_this.filter[seqProduto].add(item);
				

				/*window['ITEMTB___'+ seqProduto].setValue(descricao);
				$("#ITEMTB___"+ seqProduto).val(descricao);*/
				$("#UNDITEM___"+ seqProduto).val(unidade);
				$("#PRECOUN___"+ seqProduto).val(valor);
				$("#NSEQPED___"+ seqProduto).val(nseqped);
				$("#NUMEROSEQUENCIAL___"+ seqProduto).val(nseqPesquisa);
				$("#CODIGO___"+ seqProduto).val(codigo);
				$("#PRECOPTAX___" + seqProduto).val(valorPTAX);
				
				limpaPesquisa();
				setTimeout(function(){
					
					fecharPesquisa();
						
				},500);
			}

			function childAdd(){   

				var seqTbItem = 1;
				$("input[id^='UNDITEM___']").each(function(index,value){
				        var seqfor = $(this).attr("id").split("___")[1];
				        console.log("seq dentro for: " + seqfor);
				        seqTbItem = $("#SEQTBITEM___" + seqfor).val();
				        console.log("SEQTBITEM dentro for: " + seqTbItem);
				        seqTbItem ++;
				    });

			    var row = wdkAddChild('ITENSCONTRATO');
			    console.log("ROW: " +row );
			    $('#SEQTBITEM___'+row).val(seqTbItem);



				var contrato = $("#CONTRATO").val();
				if(contrato != "" && contrato != null){
					contrato = contrato.split(" /")[0];
				}
			    
			    var settings = {
					source: {
						url: parent.WCMAPI.getServerURL() + "/digtedpfweb/v1/rest/proxyDatasetFilter/"  + organizationId + "?datasetId=ds_dpf_getDatasetFilter&filterFields=dpfDatasetId,itensContrato,IDMOV," + contrato + "&searchField=DESCRICAO&",
						contentType: 'application/json',
						root: 'content',
						pattern: '',
						limit: 2,
						offset: 2,
						patternKey: 'searchValue',
						limitkey: 'limit',
						offsetKey: 'offset'
					},
					displayKey: 'DESCRICAO',
					multiSelect: false,
					style: {
						autocompleteTagClass: 'tag-gray',
						tableSelectedLineClass: 'info'
					}
				};


				console.log("---------> 33333333 --> " +  row);	
					
				_this.filter[row] = FLUIGC.filter('#ITEMTB___' + row, settings);


				$('#ITEMTB___' + row).parent().parent().zIndex(1000 - row);


				_this.filter[row].on('fluig.filter.item.added', function(data){


                    console.log("--------5555551");    

                    console.log(data);


                    var seq = data.target.name.split("___")[1];

                    /*var precoUnConvert = numeroParaMoeda(data.item.PRECOUNITARIO);*/
					var precoUnConvert = parseFloat(data.item.PRECOUNITARIO).toFixed(4);
                    /*precoUnConvert = precoUnConvert.replace(".", ",");*/
                    $("#PRECOPTAX___" + seq).val(precoUnConvert.replace(".", ","));
                    var codUnd = data.item.CODUND;
                    var nseqPed = data.item.NSEQITMMOV;
                    var numeroSequencial = data.item.NUMEROSEQUENCIAL;
                    var osObrigatoria = data.item.OS;
                   	var codigo = data.item.Codigo;

                    console.log("osObrigatoria: " + osObrigatoria + " numeroSequencial: " + numeroSequencial + " nseqPed: " + nseqPed + " codigo: " + codigo);
                    $("#UNDITEM___" + seq).val(codUnd);
                    
                    
                    if($("#MOEDA").val() != "R$" ){
               			var cotacao = parseFloat($("#COTACAODOLAR").val().replace(",", ".")).toFixed(4);
               			console.log("Multiplicar preço: " + precoUnConvert + "por cotação= " + cotacao);
               			precoUnConvert = precoUnConvert*cotacao;
               			precoUnConvert = precoUnConvert.toFixed(4);
               			console.log("precoUnConvert" + precoUnConvert);
               		};
               		precoUnConvert = precoUnConvert + "";
               		precoUnConvert = precoUnConvert.replace(".", ",");
               

                    $("#PRECOUN___" + seq).val(precoUnConvert);

                    
                    $("#NSEQPED___" + seq).val(nseqPed);

                    $("#NUMEROSEQUENCIAL___" + seq).val(numeroSequencial);

                    $("#OSOBRIGATORIAITEM___" + seq).val(osObrigatoria);

                    $("#CODIGO___" + seq).val(codigo);
                    console.log("CODIGO___" + $("#CODIGO___" + seq).val());
                    /*$("#PRECOUN___" + seq).val(data.item.PRECOUNITARIO);*/

                    console.log("--------5555552");

                 }); 


				 _this.filter[row].on('fluig.filter.itemRemoved', function(data){


                 	console.log("--------666666111111");    

                    console.log(data);

                    var seq = data.target.name.split("___")[1];
                    $("#PRECOPTAX___" + seq).val("0,00");
                    $("#PRECOUN___" + seq).val("0,00");
					$("#QTD___" + seq).val("");
					$("#PRECOTOT___" + seq).val("0,00");

                    console.log("--------66666662222222");

                 });  



				var contrato = $("#CONTRATO").val();

				/*
				setTimeout(function(){
					reloadZoomFilterValues("ITEMTB___" + row, "IDMOV," + contrato);					
				}, 1000);
				*/

			    return row;
			};
			
			function exibirSenha(e){
				var i = $(e).children();
				$(i).prop("class", "flaticon flaticon-view icon-sm");
				$("#SENHA").prop("type","text");
			};

			function ocultarSenha(e){
				var i = $(e).children();
				$(i).prop("class", "flaticon flaticon-view-slash icon-sm");
				$("#SENHA").prop("type","password");
			};
			
			function efetuarLogin(){
				$("#divCONTEUDO").show();
				$("#btnAbaixo").show();
				$("#btAddAnexo").show();
			};
			
			$(document).ready(function(){
				$("#abrirModalPesquisa").hide();
				$("#divCONTEUDO").hide();
				$("#divLABELAPROVACAO").hide();
				$("#divAPROVACAOGERENTEAREA").hide();
				$("#divIDF").hide();
				$("#divCCUSTO").hide();
			    $(".custo").hide();
			    $(".colunaPTAX").hide();
			    $("#divOBSVALIDADOR").hide();
			    $("#btnAbaixo").hide();
			    $("#btAddAnexo").hide();
			    $("#divMOEDA").hide();
				$("#divREVISARCOORDCORP").hide();
				$("#divREVISARGERCORP").hide();
				$("#divREVISARGERAREA").hide();
				$("#divREVISARCUSTOS").hide();
			    
			    var atv = $("#ATIVIDADE").val();
			    console.log("Atividade: "+ atv);
			    
			    
			    if(atv == "" || atv == null || atv == "0" || atv == "1"){
			    	$("#divCONTEUDO").hide();

					$("#divLABELAPROVACAO").hide();
					/*$("#divAPROVACAOGERENTEAREA").hide();*/
					$("#divIDF").hide();
					$("#divCCUSTO").hide();
				    $(".custo").hide();
				    $("#divOBSVALIDADOR").hide();
				    $("#divCONEXAO").show();
				    $("#divIMPORTARRATEIO").hide();
				    $("#divAPROVACAOVALIDADOR").hide();
				    $("#divAPROVACAOCUSTOS").hide();
				    $("#divAPROVACAOCOORDCORP").hide();
				    $("#divAPROVACAOGERCORP").hide();
				    $("#divAPROVACAOVPADM").hide();
				    $("#divAPROVACAOGERAREA").hide();
				    $("#divAPROVACAOGG").hide();
				    $("#divAPROVACAOVPOP").hide();
				    $("#divCCUGLOBAL").hide();
				    $("#abrirModalCCU").hide();
				    $("#CONTRATOTXT").hide();
				    $("#divBMSFUTURO").hide();
				    $("#abrirModalPesquisa").hide();
			    }
			    else if(atv == "48"){
			    	calculaPorcentagem();
			    	calculaPorcentagem2();
			    	$("#divBMSFUTURO").show();
			    	$("#divCONTEUDO").show();
					/*$("#divIDF").show();*/
					if($("#MOEDA").val() != "R$" ){
						$("#divMOEDA").show();
					}
					$("#divCCUSTO").show();
					$(".inclusao").hide();
				    $(".custo").show();
				    $(".pesquisa").hide();
				    $("#divOBSVALIDADOR").show();
				    $("#divCONEXAO").hide();
				    $("#divIMPORTARRATEIO").show();
				    $("#divLABELAPROVACAO").show();
				    $("#divAPROVACAOVALIDADOR").show();
				    if($("#APROVACAOCUSTOSMOTIVO").val()==""){
				    	$("#divAPROVACAOCUSTOS").hide();
				    }
				    if($("#APROVACAOCOORDCORPMOTIVO").val()==""){
				    	$("#divAPROVACAOCOORDCORP").hide();
				    }
				    if($("#APROVACAOGERCORPMOTIVO").val()==""){
				    	$("#divAPROVACAOGERCORP").hide();
				    }
				    if($("#APROVACAOGERAREAMOTIVO").val()==""){
				    	$("#divAPROVACAOGERAREA").hide();
				    }
			     	$("#divAPROVACAOCOORDCORP").find(":input").prop("readonly", true);/*Bloqueia Campos*/
				    FLUIGC.switcher.isReadOnly('#APROVACAOCOORDCORP', true);/*Bloqueia Switcher*/
			     	$("#divAPROVACAOGERCORP").find(":input").prop("readonly", true);/*Bloqueia Campos*/
			 	   	FLUIGC.switcher.isReadOnly('#APROVACAOGERCORP', true);/*Bloqueia Switcher*/
		    	 	$("#divAPROVACAOGERAREA").find(":input").prop("readonly", true);/*Bloqueia Campos*/
				    FLUIGC.switcher.isReadOnly('#APROVACAOGERAREA', true);/*Bloqueia Switcher*/
				    $("#divAPROVACAOCUSTOS").find(":input").prop("readonly", true);/*Bloqueia Campos*/
				    FLUIGC.switcher.isReadOnly('#APROVACAOCUSTOS', true);/*Bloqueia Switcher*/
				    $("#divAPROVACAOVPADM").hide();
				    $("#divAPROVACAOGG").hide();
				    $("#divAPROVACAOVPOP").hide();
				    $("#CONTRATOTXT").show();
				    $("#CONTRATO").hide();
				    var idfsimnao = $("#IDFSIMNAO").val();
				    if(idfsimnao == "SIM"){
				    	$("#divIDF").show();
				    }
				    else{
				    	$("#divIDF").hide();
				    }
				    
				    $(".btnADDclass").hide();
				    $(".exclusao").hide();
				    
				    /*$("input[id^='PRECOUN___']").each(function(index, value){
						var seq = $(this).attr("id").split("___")[1];
						$("#ITEMTB___" + seq).prop("readonly", true);
						$("#QTD___" + seq).prop("readonly", true);
					});*/
				    
					$("#CONTRATO").prop("disabled", true);
					$("#NOMESOLICITANTE").prop("readonly", true);
					$("#EMAILSOLICITANTE").prop("readonly", true);
					$("#OBSERVACOES").prop("readonly", true);
					$("#DESCONTO").prop("readonly", true);
					/*$("#OBSVALIDADOR").prop("readonly", true);*/
					/*$("#COMENTARIOS").prop("readonly", true);*/
					dtMedicao.disable("#divDTMEDICAO", true);
					dtInicioServico.disable("#divDTINICIOSERVICO", true);
					dtFinalServico.disable("#divDTFINALSERVICO", true);
					
					$('input[id^="QTD___"]').each(function(index, value){
						var seq = $(this).attr("id").split("___")[1];
						$("#ITEMTB___" + seq).prop("readonly", true);
						$("#QTD___" + seq).prop("readonly", true);
					});
					
					setTimeout(function(){
						/*$("#CCUSTO").prop("disabled", true);
						$("#EJIF").prop("disabled", true);
						$("#ATENDESCOPO").prop("disabled", true);
						$("#ENTREGAPRAZO").prop("disabled", true);
						$("#QUALIDADE").prop("disabled", true);
						$("#SEGURANCA").prop("disabled", true);
						$("#BMSPRAZO").prop("disabled", true);
						$("#MEIOAMBIENTE").prop("disabled", true);
						$("#IDFPRAZO").prop("disabled", true);*/
					}, 1200);
				    
				    setTimeout(function(){
				    	aprovacao($("#APROVACAOVALIDADOR"));
				    }, 1000);
			    }
			    else if(atv == "55"){
			    	$("#divCONTEUDO").show();
					$("#divLABELAPROVACAO").show();
					/*$("#divAPROVACAOGERENTEAREA").hide();*/
					if($("#MOEDA").val() != "R$" ){
						$("#divMOEDA").show();
					}
					$("#divIDF").hide();
					$("#divCCUSTO").hide();
				    $(".custo").hide();
				    $(".pesquisa").hide();
				    $("#divOBSVALIDADOR").hide();
				    $("#divCONEXAO").hide();
				    $("#divIMPORTARRATEIO").hide();
				    $("#divAPROVACAOVALIDADOR").show();
				    $("#divAPROVACAOCUSTOS").hide();
				    $("#divAPROVACAOCOORDCORP").hide();
				    $("#divAPROVACAOGERCORP").hide();
				    $("#divAPROVACAOVPADM").hide();
				    $("#divAPROVACAOGERAREA").hide();
				    $("#divAPROVACAOGG").hide();
				    $("#divAPROVACAOVPOP").hide();
				    $("#divCCUGLOBAL").hide();
				    $("#abrirModalCCU").hide();
				    $("#CONTRATOTXT").show();
				    $("#CONTRATO").hide();
			    }
			    else if(atv == "8"){
			    	aprovacaoCoordCorp();/*controlar visibilidade divRevisar*/
			    	$("#divCONTEUDO").show();
					/*$("#divIDF").show();*/
					if($("#MOEDA").val() != "R$" ){
						$("#divMOEDA").show();
					}
					$("#divCCUSTO").show();
					$(".inclusao").hide();
					$(".exclusao").hide();
				    $(".custo").show();
				    $(".pesquisa").hide();
				    $("#divOBSVALIDADOR").show();
				    $("#divCONEXAO").hide();
				    $("#divIMPORTARRATEIO").hide();
				    $("#divLABELAPROVACAO").show();
				    $("#divAPROVACAOVALIDADOR").show();/*mostrar aprovação anterior*/
				    $("#divAPROVACAOVALIDADOR").find(":input").prop("readonly", true);/*Bloqueia Campos*/
				    FLUIGC.switcher.isReadOnly('#APROVACAOVALIDADOR', true);/*Bloqueia Switcher*/
				    $("#divAPROVACAOCUSTOS").hide();
				    $("#divAPROVACAOCOORDCORP").show();
				    $("#divAPROVACAOGERCORP").hide();
				    $("#divAPROVACAOVPADM").hide();
				    $("#divAPROVACAOGERAREA").hide();
				    $("#divAPROVACAOGG").hide();
				    $("#divAPROVACAOVPOP").hide();
				    $("#CONTRATOTXT").show();
				    $("#CONTRATO").hide();
				    var idfsimnao = $("#IDFSIMNAO").val();
				    if(idfsimnao == "SIM"){
				    	$("#divIDF").show();
				    }
				    else{
				    	$("#divIDF").hide();
				    }
				    
				    $("#SALVACCITEM").hide();
				    
				    setTimeout(function(){
				    	aprovacao($("#APROVACAOCOORDCORP"));
				    }, 1000);
				    
				    bloquearCampos();
			    }
			    else if(atv == "80"){
			    	aprovacaoCustos();/*controlar visibilidade divRevisar*/
			    	$("#divCONTEUDO").show();
					/*$("#divIDF").show();*/
					if($("#MOEDA").val() != "R$" ){
						$("#divMOEDA").show();
					}
					$("#divCCUSTO").show();
					$(".inclusao").hide();
					$(".exclusao").hide();
				    $(".custo").show();
				    $(".pesquisa").hide();
				    $("#divOBSVALIDADOR").show();
				    $("#divCONEXAO").hide();
				    $("#divIMPORTARRATEIO").hide();
				    $("#divLABELAPROVACAO").show();
				    $("#divAPROVACAOVALIDADOR").show();/*mostrar aprovação anterior*/
				    $("#divAPROVACAOVALIDADOR").find(":input").prop("readonly", true);/*Bloqueia Campos*/
				    FLUIGC.switcher.isReadOnly('#APROVACAOVALIDADOR', true);/*Bloqueia Switcher*/
				    $("#divAPROVACAOCUSTOS").show();
				    $("#divAPROVACAOCOORDCORP").hide();
				    $("#divAPROVACAOGERCORP").hide();
				    $("#divAPROVACAOVPADM").hide();
				    $("#divAPROVACAOGERAREA").hide();
				    $("#divAPROVACAOGG").hide();
				    $("#divAPROVACAOVPOP").hide();
				    $("#CONTRATOTXT").show();
				    $("#CONTRATO").hide();
				    var idfsimnao = $("#IDFSIMNAO").val();
				    if(idfsimnao == "SIM"){
				    	$("#divIDF").show();
				    }
				    else{
				    	$("#divIDF").hide();
				    }
				    
				    $("#SALVACCITEM").hide();
				    
				    setTimeout(function(){
				    	aprovacao($("#APROVACAOCUSTOS"));
				    }, 1000);
				    
				    bloquearCampos();
			    }
			    else if(atv == "15"){
			    	aprovacaoGerCorp();/*controlar visibilidade divRevisar*/
			    	$("#divCONTEUDO").show();
					/*$("#divIDF").show();*/
					if($("#MOEDA").val() != "R$" ){
						$("#divMOEDA").show();
					}
					$("#divCCUSTO").show();
					$(".inclusao").hide();
					$(".exclusao").hide();
				    $(".custo").show();
				    $(".pesquisa").hide();
				    $("#divOBSVALIDADOR").show();
				    $("#divCONEXAO").hide();
				    $("#divIMPORTARRATEIO").hide();
				    $("#divLABELAPROVACAO").show();
				    $("#divAPROVACAOVALIDADOR").show();/*mostrar aprovação anterior*/
				    $("#divAPROVACAOVALIDADOR").find(":input").prop("readonly", true);/*Bloqueia Campos*/
				    FLUIGC.switcher.isReadOnly('#APROVACAOVALIDADOR', true);/*Bloqueia Switcher*/
				    $("#divAPROVACAOCUSTOS").hide();
				    $("#divAPROVACAOCOORDCORP").show();/*mostrar aprovação anterior*/
				    $("#divAPROVACAOCOORDCORP").find(":input").prop("readonly", true);/*Bloqueia Campos*/
				    FLUIGC.switcher.isReadOnly('#APROVACAOCOORDCORP', true);/*Bloqueia Switcher*/
				    $("#divAPROVACAOGERCORP").show();
				    $("#divAPROVACAOVPADM").hide();
				    $("#divAPROVACAOGERAREA").hide();
				    $("#divAPROVACAOGG").hide();
				    $("#divAPROVACAOVPOP").hide();
				    $("#CONTRATOTXT").show();
				    $("#CONTRATO").hide();
				    var idfsimnao = $("#IDFSIMNAO").val();
				    if(idfsimnao == "SIM"){
				    	$("#divIDF").show();
				    }
				    else{
				    	$("#divIDF").hide();
				    }
				    
				    $("#SALVACCITEM").hide();
				    
				    setTimeout(function(){
				    	aprovacao($("#APROVACAOGERCORP"));
				    }, 1000);
				    
				    bloquearCampos();
			    }
			    else if(atv == "19"){
			    	$("#divCONTEUDO").show();
					/*$("#divIDF").show();*/
					if($("#MOEDA").val() != "R$" ){
						$("#divMOEDA").show();
					}
					$("#divCCUSTO").show();
					$(".inclusao").hide();
					$(".exclusao").hide();
				    $(".custo").show();
				    $(".pesquisa").hide();
				    $("#divOBSVALIDADOR").show();
				    $("#divCONEXAO").hide();
				    $("#divIMPORTARRATEIO").hide();
				    $("#divLABELAPROVACAO").show();
				   $("#divAPROVACAOVALIDADOR").show();/*mostrar aprovação anterior*/
				    $("#divAPROVACAOVALIDADOR").find(":input").prop("readonly", true);/*Bloqueia Campos*/
				    FLUIGC.switcher.isReadOnly('#APROVACAOVALIDADOR', true);/*Bloqueia Switcher*/
				    $("#divAPROVACAOCUSTOS").hide();
				    $("#divAPROVACAOCOORDCORP").show();/*mostrar aprovação anterior*/
				    $("#divAPROVACAOGERCORP").show();/*mostrar aprovação anterior*/
				    $("#divAPROVACAOCOORDCORP").find(":input").prop("readonly", true);/*Bloqueia Campos*/
				    $("#divAPROVACAOGERCORP").find(":input").prop("readonly", true);/*Bloqueia Campos*/
				    FLUIGC.switcher.isReadOnly('#APROVACAOCOORDCORP', true);/*Bloqueia Switcher*/
				    FLUIGC.switcher.isReadOnly('#APROVACAOGERCORP', true);/*Bloqueia Switcher*/
				    $("#divAPROVACAOVPADM").show();
				    $("#divAPROVACAOGERAREA").hide();
				    $("#divAPROVACAOGG").hide();
				    $("#divAPROVACAOVPOP").hide();
				    $("#CONTRATOTXT").show();
				    $("#CONTRATO").hide();
				    var idfsimnao = $("#IDFSIMNAO").val();
				    if(idfsimnao == "SIM"){
				    	$("#divIDF").show();
				    }
				    else{
				    	$("#divIDF").hide();
				    }
				    
				    $("#SALVACCITEM").hide();
				    
				    setTimeout(function(){
				    	aprovacao($("#APROVACAOVPADM"));
				    }, 1000);
				    
				    bloquearCampos();
			    }
			    else if(atv == "30"){
			    	aprovacaoGerArea();/*controlar visibilidade divRevisar*/
			    	$("#divCONTEUDO").show();
					/*$("#divIDF").show();*/
					if($("#MOEDA").val() != "R$" ){
						$("#divMOEDA").show();
					}
					$("#divCCUSTO").show();
					$(".inclusao").hide();
					$(".exclusao").hide();
				    $(".custo").show();
				    $(".pesquisa").hide();
				    $("#divOBSVALIDADOR").show();
				    $("#divCONEXAO").hide();
				    $("#divIMPORTARRATEIO").hide();
				    $("#divLABELAPROVACAO").show();
				    $("#divAPROVACAOVALIDADOR").show();/*mostrar aprovação anterior*/
				    $("#divAPROVACAOVALIDADOR").find(":input").prop("readonly", true);/*Bloqueia Campos*/
				    FLUIGC.switcher.isReadOnly('#APROVACAOVALIDADOR', true);/*Bloqueia Switcher*/
				    $("#divAPROVACAOCUSTOS").hide();
				    $("#divAPROVACAOCOORDCORP").hide();
				    $("#divAPROVACAOGERCORP").hide();
				    $("#divAPROVACAOVPADM").hide();
				    $("#divAPROVACAOGERAREA").show();
				    $("#divAPROVACAOGG").hide();
				    $("#divAPROVACAOVPOP").hide();
				    $("#CONTRATOTXT").show();
				    $("#CONTRATO").hide();
				    var idfsimnao = $("#IDFSIMNAO").val();
				    if(idfsimnao == "SIM"){
				    	$("#divIDF").show();
				    }
				    else{
				    	$("#divIDF").hide();
				    }
				    
				    $("#SALVACCITEM").hide();
				    
				    setTimeout(function(){
				    	aprovacao($("#APROVACAOGERAREA"));
				    }, 1000);
				    
				    bloquearCampos();
			    }
			    else if(atv == "34"){
			    	$("#divCONTEUDO").show();
					/*$("#divIDF").show();*/
					if($("#MOEDA").val() != "R$" ){
						$("#divMOEDA").show();
					}
					$("#divCCUSTO").show();
					$(".inclusao").hide();
					$(".exclusao").hide();
				    $(".custo").show();
				    $(".pesquisa").hide();
				    $("#divOBSVALIDADOR").show();
				    $("#divCONEXAO").hide();
				    $("#divIMPORTARRATEIO").hide();
				    $("#divLABELAPROVACAO").show();
				    $("#divAPROVACAOVALIDADOR").show();/*mostrar aprovação anterior*/
				    $("#divAPROVACAOVALIDADOR").find(":input").prop("readonly", true);/*Bloqueia Campos*/
				    FLUIGC.switcher.isReadOnly('#APROVACAOVALIDADOR', true);/*Bloqueia Switcher*/
				    $("#divAPROVACAOCUSTOS").hide();
				    $("#divAPROVACAOCOORDCORP").hide();
				    $("#divAPROVACAOGERCORP").hide();
				    $("#divAPROVACAOVPADM").hide();
				    $("#divAPROVACAOGERAREA").show();/*mostrar aprovação anterior*/
				    $("#divAPROVACAOGERAREA").find(":input").prop("readonly", true);/*Bloqueia Campos*/
				    FLUIGC.switcher.isReadOnly('#APROVACAOGERAREA', true);/*Bloqueia Switcher*/
				    $("#divAPROVACAOGG").show();
				    $("#divAPROVACAOVPOP").hide();
				    $("#CONTRATOTXT").show();
				    $("#CONTRATO").hide();
				    
				    var idfsimnao = $("#IDFSIMNAO").val();
				    if(idfsimnao == "SIM"){
				    	$("#divIDF").show();
				    }
				    else{
				    	$("#divIDF").hide();
				    }
				    
				    $("#SALVACCITEM").hide();
				    
				    setTimeout(function(){
				    	aprovacao($("#APROVACAOGG"));
				    }, 1000);
				    
				    bloquearCampos();
			    }
			    else if(atv == "38"){
			    	$("#divCONTEUDO").show();
					/*$("#divIDF").show();*/
					if($("#MOEDA").val() != "R$" ){
						$("#divMOEDA").show();
					}
					$("#divCCUSTO").show();
					$(".inclusao").hide();
					$(".exclusao").hide();
				    $(".custo").show();
				    $(".pesquisa").hide();
				    $("#divOBSVALIDADOR").show();
				    $("#divCONEXAO").hide();
				    $("#divIMPORTARRATEIO").hide();
				    $("#divLABELAPROVACAO").show();
				    $("#divAPROVACAOVALIDADOR").show();/*mostrar aprovação anterior*/
				    $("#divAPROVACAOVALIDADOR").find(":input").prop("readonly", true);/*Bloqueia Campos*/
				    FLUIGC.switcher.isReadOnly('#APROVACAOVALIDADOR', true);/*Bloqueia Switcher*/
				    $("#divAPROVACAOCUSTOS").hide();
				    $("#divAPROVACAOCOORDCORP").hide();
				    $("#divAPROVACAOGERCORP").hide();
				    $("#divAPROVACAOVPADM").hide();
				    $("#divAPROVACAOGERAREA").show();/*mostrar aprovação anterior*/
				    $("#divAPROVACAOGG").show();/*mostrar aprovação anterior*/
				    $("#divAPROVACAOGERAREA").find(":input").prop("readonly", true);/*Bloqueia Campos*/
				    $("#divAPROVACAOGG").find(":input").prop("readonly", true);/*Bloqueia Campos*/
				    FLUIGC.switcher.isReadOnly('#APROVACAOGERAREA', true);/*Bloqueia Switcher*/
				    FLUIGC.switcher.isReadOnly('#APROVACAOGG', true);/*Bloqueia Switcher*/
				    $("#divAPROVACAOVPOP").show();
				    $("#CONTRATOTXT").show();
				    $("#CONTRATO").hide();
				    var idfsimnao = $("#IDFSIMNAO").val();
				    if(idfsimnao == "SIM"){
				    	$("#divIDF").show();
				    }
				    else{
				    	$("#divIDF").hide();
				    }
				    
				    $("#SALVACCITEM").hide();
				    
				    setTimeout(function(){
				    	aprovacao($("#APROVACAOVPOP"));
				    }, 1000);
				    
				    bloquearCampos();
			    }
			    else if(atv == "65" || atv == "23"){
			    	$("#divCONTEUDO").show();
					/*$("#divIDF").show();*/
					if($("#MOEDA").val() != "R$" ){
						$("#divMOEDA").show();
					}
					$("#divCCUSTO").show();
					$(".inclusao").hide();
					$(".exclusao").hide();
				    $(".custo").show();
				    $(".pesquisa").hide();
				    $("#divOBSVALIDADOR").show();
				    $("#divCONEXAO").hide();
				    $("#divIMPORTARRATEIO").hide();
				    $("#divLABELAPROVACAO").hide();
				    $("#divAPROVACAOVALIDADOR").show();
				    $("#divAPROVACAOCUSTOS").show();
				    $("#divAPROVACAOCOORDCORP").show();
				    $("#divAPROVACAOGERCORP").show();
				    $("#divAPROVACAOVPADM").show();
				    $("#divAPROVACAOGERAREA").show();
				    $("#divAPROVACAOGG").show();
				    $("#divAPROVACAOVPOP").show();				    
				    $("#SALVACCITEM").hide();
				    $("#CONTRATOTXT").show();
				    $("#CONTRATO").hide();
				    var idfsimnao = $("#IDFSIMNAO").val();
				    if(idfsimnao == "SIM"){
				    	$("#divIDF").show();
				    }
				    else{
				    	$("#divIDF").hide();
				    }	
				    
				    $("#divAPROVACAOVALIDADOR").find(":input").prop("readonly", true);
				    $("#divAPROVACAOCUSTOS").find(":input").prop("readonly", true);
				    $("#divAPROVACAOCOORDCORP").find(":input").prop("readonly", true);
				    $("#divAPROVACAOGERCORP").find(":input").prop("readonly", true);
				    $("#divAPROVACAOVPADM").find(":input").prop("readonly", true);
				    $("#divAPROVACAOGERAREA").find(":input").prop("readonly", true);
				    $("#divAPROVACAOGG").find(":input").prop("readonly", true);
				    $("#divAPROVACAOVPOP").find(":input").prop("readonly", true);
				    
				    FLUIGC.switcher.isReadOnly('#APROVACAOVALIDADOR', true);
				    FLUIGC.switcher.isReadOnly('#APROVACAOCUSTOS', true);
				    FLUIGC.switcher.isReadOnly('#APROVACAOCOORDCORP', true);
				    FLUIGC.switcher.isReadOnly('#APROVACAOGERCORP', true);
				    FLUIGC.switcher.isReadOnly('#APROVACAOVPADM', true);
				    FLUIGC.switcher.isReadOnly('#APROVACAOGERAREA', true);
				    FLUIGC.switcher.isReadOnly('#APROVACAOGG', true);
				    FLUIGC.switcher.isReadOnly('#APROVACAOVPOP', true);
				    FLUIGC.switcher.isReadOnly('#REVISARCOORDCORP', true);
				    FLUIGC.switcher.isReadOnly('#REVISARGERCORP', true);
				    FLUIGC.switcher.isReadOnly('#REVISARGERAREA', true);
					FLUIGC.switcher.isReadOnly('#REVISARCUSTOS', true);
				    bloquearCampos();
			    };
			});
			
			
			
			FLUIGC.switcher.init('#APROVACAOVALIDADOR');
			FLUIGC.switcher.init('#APROVACAOCUSTOS');
			FLUIGC.switcher.init('#APROVACAOCOORDCORP');
			FLUIGC.switcher.init('#APROVACAOGERCORP');
			FLUIGC.switcher.init('#APROVACAOVPADM');
			FLUIGC.switcher.init('#APROVACAOGERAREA');
			FLUIGC.switcher.init('#APROVACAOGG');
			FLUIGC.switcher.init('#APROVACAOVPOP');
			FLUIGC.switcher.init('#REVISARCOORDCORP');
			FLUIGC.switcher.init('#REVISARGERCORP');
			FLUIGC.switcher.init('#REVISARGERAREA');
			FLUIGC.switcher.init('#REVISARCUSTOS');
			var dtMedicao = FLUIGC.calendar('#divDTMEDICAO');
			var dtInicioServico = FLUIGC.calendar('#divDTINICIOSERVICO');
			var dtFinalServico = FLUIGC.calendar('#divDTFINALSERVICO');
			
			
			var beforeSendValidate = function(numState,nextState){
			    var atv = $("#ATIVIDADE").val();
			    if(atv == "0" || atv == "4"|| atv == ""){
			    	var user = $("#LOGIN").val();
			    	var senha = $("#SENHA").val();
			    	var c1 = DatasetFactory.createConstraint("CNPJ", user, user, ConstraintType.MUST);
					var c2 = DatasetFactory.createConstraint("SENHA", senha, senha, ConstraintType.MUST);
					var constraints = new Array(c1,c2);

					var dataset = loadPublicDataset("buscarLogin",null,constraints,null);

					var count = dataset.values.length;
					var login = true;
					for(var i = 0; i< count; i++){
						var ret = dataset.values[i]["RETORNO"];
						if(ret == "SUCESSO"){
							console.log("Login Foi feito com sucesso");
						}
						else{
							login = false;
							console.log("Login não foi validado");
						};
					};
					if(!login){
						Swal.fire({
							icon: 'error',
							title: 'Login não autenticado!',
							text: 'Favor efetuar o login novamente'
						});
						$("#divCONTEUDO").hide();
						$("#divCONEXAO").show();
						return false;
					};
					var contrato = $("#CONTRATO").val();
					var dtMedicao = $("#DTMEDICAO").val();
					var dtInicioServico = $("#DTINICIOSERVICO").val();
					var dtFinalServico = $("#DTFINALSERVICO").val();
					var nome = $("#NOMESOLICITANTE").val();
					var email = $("#EMAILSOLICITANTE").val();
					var msg = "";
					if(contrato == "" || contrato == null){
						msg = msg + "Contrato; ";
					};
					if(dtMedicao == "" || dtMedicao == null){
						msg = msg + "Data Medição; ";
					};
					if(dtInicioServico == "" || dtInicioServico == null){
						msg = msg + "Data Inicio de Serviço; ";
					};
					if(dtFinalServico == "" || dtFinalServico == null){
						msg = msg + "Data Final de Serviço; ";
					};
					if(nome == "" || nome == null){
						msg = msg + "Nome Solicitante; ";
					};
					if(email == "" || email == null){
						msg = msg + "E-mail Solicitante; ";
					};
					if(msg != ""){
						Swal.fire({
							icon: 'error',
							title: 'Campos obrigatórios não preenchidos!',
							text: 'Favor inserir informações nos seguintes campos: ' + msg
						});
						return false;
					};
					var count = 0;
					var vazio = false;
					
					$("input[id^='PRECOUN___']").each(function(index,value){
				        var seq = $(this).attr("id").split("___")[1];
				        count++;
						var item = $("#ITEMTB___" + seq).val();
						var qtd = $("#QTD___" + seq).val();
						var nseqped = $("#NSEQPED___" + seq).val();
						if(item == "" || item == null){
							Swal.fire({
								icon: 'error',
								title: 'Campo obrigatório não preenchido!',
								text: 'Na tabela de itens, na linha ' + count + ' informar um valor válido para o campo Item' 
							});
							vazio = true;
							return false;
						};
						
						if(qtd == "" || qtd == null){
							Swal.fire({
								icon: 'error',
								title: 'Campo obrigatório não preenchido!',
								text: 'Na tabela de itens, na linha ' + count + ' informar um valor válido para o campo Quantidade' 
							});
							
							vazio = true;
							return false;
						};
						if(nseqped != "" || nseqped != null){
							console.log("Entrei para verificar o NSEQPED do item " + seq);
							$("input[id^='PRECOUN___']").each(function(index,value){
								
								var seq1 = $(this).attr("id").split("___")[1];
								var nseqped1 = $("#NSEQPED___" + seq1).val();
								console.log("comparar se: " + nseqped + " e igual: " + nseqped1 + " e se : " + $("#SEQTBITEM___" + seq).val() + " e diferente de : " + $("#SEQTBITEM___" + seq1).val());
								if($("#SEQTBITEM___" + nseqped).val() != "" && $("#SEQTBITEM___" + seq).val()!= undefined){
									if(nseqped == nseqped1 && $("#SEQTBITEM___" + seq).val() != $("#SEQTBITEM___" + seq1).val()){
										console.log("Entrei no erro");
										Swal.fire({
											icon: 'error',
											title: 'Item Duplicado!',
											text: 'O Item ' + $("#SEQTBITEM___" + seq1).val() + ' foi selecionado mais de uma vez' 
										});
										
										vazio = true;
										return false;
									};
									
								};
								
								
							});

							if(vazio){
									return false;
								};

						};
						
					});
					
					if(vazio){
						return false;
					};
					
					if(count == 0){
						Swal.fire({
							icon:'error',
							title: 'Obrigatório informar pelo menos 1 item!'
						});
						
						return false;
					};
					
					if( $("#EMAILSOLICITANTE").val().indexOf('@')== -1 || $("#EMAILSOLICITANTE").val().indexOf('.') == -1){
						Swal.fire({
							icon:'error',
							title: 'E-mail inválido',
							text: 'Insira um e-mail válido no campo "E-mail"'
						});
						
						return false;
					};
					var bmsAtual = parseFloat($("#BMSATUAL").val().replace(".","").replace(".","").replace(".","").replace(".","").replace(".","").replace(",","."));
					var saldo = parseFloat($("#SALDO").val().replace(".","").replace(".","").replace(".","").replace(".","").replace(".","").replace(",","."));

					console.log("Valor BMS Atual: " + bmsAtual + " Valor Saldo: " + saldo);
					if( bmsAtual >  saldo ){
						Swal.fire({
							icon:'error',
							title: 'Saldo Insuficinete',
							text: 'O valor da BMS atual dever ser menor que o saldo'
						});
						
						return false;
					};
					calcTotalBMS();
			    }
			    else if(atv == "48"){
			    	
			    	
			    	var msg = "";
			    	
			    	/*$("input[id^='PRECOUN___']").each(function(index, value){
						var seq = $(this).attr("id").split("___")[1];
						$("#ITEMTB___" + seq).prop("readonly", true);
					});*/
					
			    	var ccusto = $("#CCUSTO").val();
			    	var ejif = $("#EJIF").val();
			    	var atendEscopo = $("#ATENDESCOPO").val();
			    	var entregaPrazo = $("#ENTREGAPRAZO").val();
			    	var qualidade = $("#QUALIDADE").val();
			    	var seguranca = $("#SEGURANCA").val();
			    	var bmsPrazo = $("#BMSPRAZO").val();
			    	var meioAmbiente = $("#MEIOAMBIENTE").val();
			    	var idfPrazo = $("#IDFPRAZO").val();
			    	
			    	if(ccusto == "" || ccusto == null){
			    		msg = msg + "Centro de Custo; ";
			    	};
			    	if(ejif == "" || ejif == null){
			    		msg = msg + "EJIF; ";
			    	};
			    	
			    	var idfsimnao = $("#IDFSIMNAO").val();
				    if(idfsimnao == "SIM"){
				    	if(atendEscopo == "" || atendEscopo == null){
				    		msg = msg + "Atendimento ao Escopo; ";
				    	};
				    	if(entregaPrazo == "" || entregaPrazo == null){
				    		msg = msg + "Entrega dos Serviços no Prazo; ";
				    	};
				    	if(qualidade == "" || qualidade == null){
				    		msg = msg + "Qualidade; ";
				    	};
				    	if(seguranca == "" || seguranca == null){
				    		msg = msg + "Segurança; ";
				    	};
				    	if(bmsPrazo == "" || bmsPrazo == null){
				    		msg = msg + "BMS Entregue no Prazo; ";
				    	};
				    	if(meioAmbiente == "" || meioAmbiente == null){
				    		msg = msg + "Meio Ambiente; ";
				    	};
				    	if(idfPrazo == "" || idfPrazo == null){
				    		msg = msg + "IDF Entregue no Prazo; ";
				    	};
				    };
			    	
			    	var decisao = $("#DECISAO").val();
			    	if(decisao == "NAO"){
			    		var justi = $("#APROVACAOVALIDADORMOTIVO").val();
			    		if(justi == "" || justi == null){
			    			Swal.fire({
			    				icon: 'error',
			    				title: 'Justificativa Obrigatória!',
			    				text: 'Para reprovar é obrigatório informar uma justificativa'
			    			});
			    			
			    			return false;
			    		}
			    	}
			    	else{
			    		if(msg != ""){
				    		Swal.fire({
				    			icon: 'error',
				    			title: 'Campos Obrigatórios Não Preenchidos!',
				    			text: 'Preencha o(s) campo(s): ' + msg
				    		});
				    		
				    		return false;
				    	};
				    	
				    	
				    	
				    	
						
						var percentual = true;
						var ccustoVazio = true;
						var seqERRADO = "";
						var seqERRADO2 = "";
						var seqERRADO3 = "";
						var valorZero = false;
						var validaOS = false;
						var osErrada = "";
						console.log("Iniciar verificação rateio");
				    	$("input[id^='PRECOUN___']").each(function(index, value){
							var seq = $(this).attr("id").split("___")[1];
							var seq = $("#SEQTBITEM___" + seq).val();
							var totPercent = 0;
							
							$("input[id^='VALORCCUITENS___']").each(function(index, value){
								var seq2 = $(this).attr("id").split("___")[1];
								var rateio = $("#SEQCCUITENS___" + seq2).val();
								if(seq == rateio){
									console.log("seq : " + seq + " = Raterio: " + rateio);
									var percent = $("#PERCENTUALCCUITENS___" + seq2).val().replace(",",".");
									if(percent == "" || percent == null){
										percent = 0;
									}
									totPercent = totPercent + parseFloat(percent);
									var centroCusto = $("#CODCCUITENS___" + seq2).val();
									console.log("centroCusto: " + centroCusto);
									if(centroCusto == "" || centroCusto == null){
										ccustoVazio = false;
										seqERRADO3 = seq + "; ";
									}
									else{
										console.log("Iniciar verificação OS");
										var os = $("#OSCCUITENS___" + seq2).val();
										console.log("OSCCUITENS___" + seq2 + ": " + $("#OSCCUITENS___" + seq2).val());
										if(os == "" || os == null){
											console.log("OS em branco");
											var osObrigatoria = $("#OSOBRIGATORIAITEM___" + seq).val();
											if(osObrigatoria == "S"){
												console.log("OS com erro: " + seq);
												validaOS = true;
												osErrada = seq + ";" ;
											}
										}
									}
								};
							});
							
							totPercent = totPercent.toFixed(4);
							if(totPercent < 100 || totPercent > 100){
								console.log("Seq: " + seq + " encontrei erro no percent: " + totPercent);
								percentual = false;
								seqERRADO = seq + "; ";
							}
						});	
				    	
				    	if(ccustoVazio == false){
							Swal.fire({
								icon: 'error',
								title: 'Centro de custo vazio!',
								text: 'Informe o centro de custo para o(s) item(ns): '+ seqERRADO3
							});
							
							return false;
						}
						
						if(percentual == false){
							Swal.fire({
								icon: 'error',
								title: 'Percentual Inválido!',
								text: 'Verifique a somatória dos percentuais no rateio por centro de custo do(s) item(ns): '+ seqERRADO
							});
							
							return false;
						}

						if(validaOS == true){
							$("#OSOBRIGATORIA").val("S");
							console.log("OSOBRIGATORIA: " + $("#OSOBRIGATORIA").val());
							Swal.fire({
								icon: 'error',
								title: 'OS Obrigatória!',
								text: 'Informe a Os para o(s) item(ns): '+ osErrada
							});
							
							return false;
						}else{
							$("#OSOBRIGATORIA").val("N");
							console.log("OSOBRIGATORIA: " + $("#OSOBRIGATORIA").val());
						};
			    	}
			    	
			    	var count = 0;
					var vazio = false;

					var ccurepetido = false;
					var arrayRepete = new Array();
					var itemRepetido = "";
					$("input[id^='VALORCCUITENS___']").each(function(index, value){
						var seq = $(this).attr("id").split("___")[1];
						var seqItem = $("#SEQCCUITENS___" + seq).val();
						
						$("input[id^='VALORCCUITENS___']").each(function(index, value){
							var seq2 = $(this).attr("id").split("___")[1];
							var seqItem2 = $("#SEQCCUITENS___" + seq2).val();
							
							if(seq == seq2){
								console.log("estou comparando o mesmo cara!");
							}
							else if(seqItem == seqItem2){
								var codccusto = $("#CODCCUITENS___" + seq).val();
								var codccusto2 = $("#CODCCUITENS___" + seq2).val();
								
								if(codccusto == codccusto2){
									var codos = $("#OSCCUITENS___" + seq).val();
									var codos2 = $("#OSCCUITENS___" + seq2).val();
									
									if(codos == codos2){
										ccurepetido = true;
										
										var jaFoi = false;
										for(var i = 0; i < arrayRepete; i++){
											var jaFoiRepetido = arrayRepete[i];
											if(jaFoiRepetido == seqItem){
												itemRepetido = itemRepetido + seqItem +"; "; 
												jaFoi = true;
											};
										};
										
										if(!jaFoi){
											arrayRepete.push( seqItem );
										};
									}
									else{
										console.log("Meu código OS não é igual");
									};
								}
								else{
									console.log("Meu centro de custo é diferente");
								};
							}
							else{
								console.log("Não estou comparando o mesmo item, então desconsidero");
							};
						});
						
					});
					
					if(ccurepetido){
						Swal.fire({
							icon: 'error',
							title: 'OS e Centro de Custo repetidos',
							text: 'Favor analisar o rateio do(s) item(ns): ' + itemRepetido
						});
						
						return false;
					};
			    }
			    else if(atv == "8"){
			    	var decisao = $("#DECISAO").val();
			    	if(decisao == "NAO" || decisao == "REVISAR"){
			    		var justi = $("#APROVACAOCOORDCORPMOTIVO").val();
			    		if(justi == "" || justi == null){
			    			Swal.fire({
			    				icon: 'error',
			    				title: 'Justificativa Obrigatória!',
			    				text: 'Para reprovar é obrigatório informar uma justificativa'
			    			});
			    			
			    			return false;
			    		};
			    	};
					
			    	liberarCampos();
			    }
			    else if(atv == "80" || decisao == "REVISAR"){
			    	var decisao = $("#DECISAO").val();
			    	if(decisao == "NAO"){
			    		var justi = $("#APROVACAOCUSTOSMOTIVO").val();
			    		if(justi == "" || justi == null){
			    			Swal.fire({
			    				icon: 'error',
			    				title: 'Justificativa Obrigatória!',
			    				text: 'Para reprovar é obrigatório informar uma justificativa'
			    			});
			    			
			    			return false;
			    		};
			    	};
					
			    	liberarCampos();
			    }
				else if(atv == "15" || decisao == "REVISAR"){
					var decisao = $("#DECISAO").val();
			    	if(decisao == "NAO"){
			    		var justi = $("#APROVACAOGERCORPMOTIVO").val();
			    		if(justi == "" || justi == null){
			    			Swal.fire({
			    				icon: 'error',
			    				title: 'Justificativa Obrigatória!',
			    				text: 'Para reprovar é obrigatório informar uma justificativa'
			    			});
			    			
			    			return false;
			    		};
			    	};
			    	
					liberarCampos();
			    }
				else if(atv == "19"){
					var decisao = $("#DECISAO").val();
			    	if(decisao == "NAO"){
			    		var justi = $("#APROVACAOVPADMMOTIVO").val();
			    		if(justi == "" || justi == null){
			    			Swal.fire({
			    				icon: 'error',
			    				title: 'Justificativa Obrigatória!',
			    				text: 'Para reprovar é obrigatório informar uma justificativa'
			    			});
			    			
			    			return false;
			    		};
			    	};
					
					liberarCampos();
				}
				else if(atv == "30" || decisao == "REVISAR"){
					var decisao = $("#DECISAO").val();
			    	if(decisao == "NAO"){
			    		var justi = $("#APROVACAOGERAREAMOTIVO").val();
			    		if(justi == "" || justi == null){
			    			Swal.fire({
			    				icon: 'error',
			    				title: 'Justificativa Obrigatória!',
			    				text: 'Para reprovar é obrigatório informar uma justificativa'
			    			});
			    			
			    			return false;
			    		};
			    	};
			    	
					liberarCampos();
			    }
				else if(atv == "34"){
					var decisao = $("#DECISAO").val();
			    	if(decisao == "NAO"){
			    		var justi = $("#APROVACAOGGMOTIVO").val();
			    		if(justi == "" || justi == null){
			    			Swal.fire({
			    				icon: 'error',
			    				title: 'Justificativa Obrigatória!',
			    				text: 'Para reprovar é obrigatório informar uma justificativa'
			    			});
			    			
			    			return false;
			    		};
			    	};
					
					liberarCampos();
			    }
				else if(atv == "38"){
					var decisao = $("#DECISAO").val();
			    	if(decisao == "NAO"){
			    		var justi = $("#APROVACAOVPOPMOTIVO").val();
			    		if(justi == "" || justi == null){
			    			Swal.fire({
			    				icon: 'error',
			    				title: 'Justificativa Obrigatória!',
			    				text: 'Para reprovar é obrigatório informar uma justificativa'
			    			});
			    			
			    			return false;
			    		};
			    	};
			    	
					liberarCampos();
				}
				else if(atv == "38" || atv == "65"){
					liberarCampos();
				}
			};
			
			function bloquearCampos(){
				$("#CONTRATO").prop("disabled", true);
				/*$("#divDTMEDICAO").prop("disabled", true);*/
				$("#NOMESOLICITANTE").prop("readonly", true);
				$("#EMAILSOLICITANTE").prop("readonly", true);
				$("#OBSERVACOES").prop("readonly", true);
				$("#DESCONTO").prop("readonly", true);
				$("#OBSVALIDADOR").prop("readonly", true);
				$("#COMENTARIOS").prop("readonly", true);
				/*$("#DTMEDICAO").prop("disabled", true);*/
				dtMedicao.disable("#divDTMEDICAO", true);
				dtInicioServico.disable("#divDTINICIOSERVICO", true);
				dtFinalServico.disable("#divDTFINALSERVICO", true);
				
				
				$('input[id^="QTD___"]').each(function(index, value){
					var seq = $(this).attr("id").split("___")[1];
					$("#ITEMTB___" + seq).prop("readonly", true);
					$("#QTD___" + seq).prop("readonly", true);
				});
				
				setTimeout(function(){
					$("#CCUSTO").prop("disabled", true);
					$("#EJIF").prop("disabled", true);
					$("#ATENDESCOPO").prop("disabled", true);
					$("#ENTREGAPRAZO").prop("disabled", true);
					$("#QUALIDADE").prop("disabled", true);
					$("#SEGURANCA").prop("disabled", true);
					$("#BMSPRAZO").prop("disabled", true);
					$("#MEIOAMBIENTE").prop("disabled", true);
					$("#IDFPRAZO").prop("disabled", true);
				}, 1200);
			}
			
			function liberarCampos(){
				$("#CONTRATO").prop("disabled", false);
				/*$("#divDTMEDICAO").prop("disabled", false);*/
				$("#NOMESOLICITANTE").prop("readonly", true);
				$("#EMAILSOLICITANTE").prop("readonly", true);
				$("#OBSERVACOES").prop("readonly", true);
				$("#DESCONTO").prop("readonly", true);
				$("#OBSVALIDADOR").prop("readonly", true);
				$("#COMENTARIOS").prop("readonly", true);
				$("#EMAILSOLICITANTE").prop("readonly", false);
				$("#DTMEDICAO").prop("disabled", false);
				$("#DTINICIOSERVICO").prop("disabled", false);
				$("#DTFINALSERVICO").prop("disabled", false);
				
				$('input[id^="QTD___"]').each(function(index, value){
					var seq = $(this).attr("id").split("___")[1];
					$("#ITEMTB___" + seq).prop("readonly", true);
					$("#QTD___" + seq).prop("readonly", true);
				});
				
				/*setTimeout(function(){*/
					$("#CCUSTO").prop("disabled", false);
					$("#EJIF").prop("disabled", false);
					$("#ATENDESCOPO").prop("disabled", false);
					$("#ENTREGAPRAZO").prop("disabled", false);
					$("#QUALIDADE").prop("disabled", false);
					$("#SEGURANCA").prop("disabled", false);
					$("#BMSPRAZO").prop("disabled", false);
					$("#MEIOAMBIENTE").prop("disabled", false);
					$("#IDFPRAZO").prop("disabled", false);
				/*}, 1200);*/
			};
			function buscaValidador(){
				var contrato = $("#CODCONTRATO").val();
		    	var c1 = DatasetFactory.createConstraint("NUMCONTRATO", contrato, contrato, ConstraintType.MUST);
				var constraints = new Array(c1);
				var dataset = loadPublicDataset("emailValidador",null,constraints,null);
				var email = dataset.values[0]["EMAIL"];
				$("#EMAILVALIDADOR").val( email );
				var c2 = DatasetFactory.createConstraint("EMAIL", email, email, ConstraintType.MUST);
				var constraints2 = new Array(c2);
				var dataset2 = loadPublicDataset("aprovadorValidador",null,constraints2,null);
				var aprovador = dataset2.values[0]["RETORNO"];
				$("#USERVALIDADOR").val( aprovador );
			};

			function onlynumber(evt) {/*function para aceitar apenas "numeros", ".", ","*/
			   var theEvent = evt || window.event;
			   var key = theEvent.keyCode || theEvent.which;
			   key = String.fromCharCode( key );
			   var regex = /^[0-9,]+$/;
			   /*var regex = /^[0-9.]+$/;*/
			   if( !regex.test(key) ) {
			      theEvent.returnValue = false;
			      if(theEvent.preventDefault) theEvent.preventDefault();
			   };
			};
			function mouse(e) {
				
				/* PEGA O VALOR COMPLETO PREENCHIDO NO CAMPO*/
				var valCampo = $(e).val();
				
				/* SE CAMPO NÃO FOI PREENCHIDO*/
				if(valCampo == "" || valCampo == null){
					
					return false;
					
				}
				/* SE CAMPO FOI PREENCHIDO*/
				else{
					
					/* CARREGA EM "TITLE" O VALOR DO CAMPO PREENCHIDO*/
					$(e).prop("title", valCampo);
					
					return true;
					
				};
				
			};
			/* exemplo de como saber se esta em abaixo público ou privado */
			if (parent.WCMAPI.getUserLogin() !=null){	
				/* priado */
				organizationId = parent.WCMAPI.organizationId; /*codigo do tenant fluig*/
			}
			else{
				/* publico */
				organizationId = $("[id*=CadastroWidget]")[0].dataset.params.split("'")[3] ; /*codigo do tenant fluig*/
			};
		</script>
		<style type="text/css">
			.swal2-styled.swal2-confirm {
				background-color: #e3b420 !important;
			}
		</style>
	</body>
</html>